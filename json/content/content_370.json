{"gid":"370","title":"memcache\u6ce8\u518c\u8868","date":"1420412400","content":"\r\n <div> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'><strong>\u5b89\u88c5\u8fc7\u7a0b\uff1a<\/strong><\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>1.\u4e0b\u8f7dwin\u7248memcached\uff0c\u5730\u5740\uff1a<a href='http:\/\/cloud.github.com\/downloads\/gwhalin\/Memcached-Java-Client\/java_memcached-release_2.6.2.zip' style='color:rgb(16, 138, 198);'>http:\/\/cloud.github.com\/downloads\/gwhalin\/Memcached-Java-Client\/java_memcached-release_2.6.2.zip<\/a><\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>2.\u89e3\u538b\u5230\u6307\u5b9a\u76ee\u5f55\uff0c\u6bd4\u5982\uff1ad:\\memcached-1.2.6-win32-bin;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>3.\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u5b89\u88c5memcached\u4e3a\u7cfb\u7edf\u670d\u52a1\uff0c\u5728C:\\Windows\\System32\u76ee\u5f55\u4e0b\u627e\u5230cmd.exe\u6587\u4ef6\uff0c\u70b9\u51fb\uff0c\u9009\u62e9\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8fd0\u884c\uff1b<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>4.\u5207\u6362\u5230d:\\memcached-1.2.6-win32-bin\u76ee\u5f55\uff0c\u8fd0\u884c\u5b89\u88c5\u6587\u4ef6\uff0c\u6267\u884c\uff1amemcached.exe -d install\uff0c\u5b8c\u6210\u5b89\u88c5\uff1b<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>\u5728windows\u7684\u670d\u52a1\u91cc\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u5b89\u88c5\u7684memcached\u8bbf\u95ee<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'><strong>\u81ea\u5b9a\u4e49\uff1a<\/strong><\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>\u82e5\u8981\u4fee\u6539\u542f\u52a8\u7aef\u53e3\u53ca\u5185\u5b58\u5927\u5c0f\uff0c\u5728\u542f\u52a8\u65f6\u4f7f\u7528\u53c2\u6570-p 11222 -m 1024 \u8c8c\u4f3c\u4e0d\u80fd\u66f4\u6539\u7aef\u53e3\uff0c\u53ea\u80fd\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u4fee\u6539\u3002<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>1.\u542f\u52a8\u6ce8\u518c\u8868\uff0cwin\u952e+R \u8f93\u5165\uff1aregedit.exe\uff1b<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>2.\u627e\u5230memcached\u670d\u52a1\u8def\u5f84\uff1aHKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\memcached Server\uff0c\u4fee\u6539ImagePath\u9879\u503c\uff0c\u5728\u539f\u5148\u7684\u542f\u52a8\u53c2\u6570\u524d\u9762\u589e\u52a0<span style='color:rgb(255, 0, 0);'>-p 11222 -m 1024<\/span>\uff0c\u4fee\u6539\u540e\u7684\u7ed3\u679c\u5982<span style='color:rgb(255, 102, 0);'>'D:\\memcached-1.2.6-win32-bin\\memcached.exe' -p 11222 -m 1024 -d runservice<\/span><\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>3.\u91cd\u542f\u670d\u52a1\uff0ctelnet\u65b0\u7aef\u53e3\uff0c\u53d1\u73b0\u53ef\u4ee5\u4f7f\u7528\uff0c\u4fee\u6539\u5b8c\u6210<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>\u76f4\u63a5\u5728\u76ee\u5f55\u4e0b\u53cc\u51fbmemcached.exe \u6587\u4ef6\u542f\u52a8memcached\u670d\u52a1\uff0c\u4f1a\u6709\u4e22\u6570\u636e\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u542f\u52a8\u53c2\u6570-M\u6765\u542f\u7528\u4fdd\u62a4\u539f\u6570\u636e\u529f\u80fd\uff1b<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'><strong>\u4ee5\u4e0b\u662f\u6458\u6284\u522b\u4eba\u7684\u6210\u679c\uff1a<\/strong><\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>memcached \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8bbe\u7f6e\u4e86\u6c38\u4e0d\u8fc7\u671f\u7684\u6570\u636e\u4f1a\u88ab\u8e22\u6389\uff0c\u8fd9\u4e2a\u95ee\u9898\u597d\u50cf\u8981\u4fee\u6539memcached \u6e90\u4ee3\u7801\u3002<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>\u6587\u4ef6 items.c,\u627e\u5230\u4e00\u4e0b\u4ee3\u7801<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>for (search = tails[id]; tries &gt; 0 &amp;&amp; search != NULL; tries\u2013, search=search-&gt;prev) {<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>if (search-&gt;refcount == 0) {<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; if (search-&gt;exptime == 0 || search-&gt;exptime &gt; current_time) {<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; itemstats[id].evicted++;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; itemstats[id].evicted_time = current_time \u2013 search-&gt;time;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; STATS_LOCK();<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; stats.evictions++;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; STATS_UNLOCK();<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; }<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; do_item_unlink(search);<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; break;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>}<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>}<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>\u4fee\u6539\u4e3a\uff1a<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>for (search = tails[id]; tries &gt; 0 &amp;&amp; search != NULL; tries\u2013, search=search-&gt;prev) {<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>if (search-&gt;refcount == 0 &amp;&amp; search-&gt;exptime != 0) {<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; if (search-&gt;exptime &gt; current_time) {<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; itemstats[id].evicted++;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; itemstats[id].evicted_time = current_time \u2013 search-&gt;time;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; STATS_LOCK();<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; stats.evictions++;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; STATS_UNLOCK();<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; }<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; do_item_unlink(search);<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;&nbsp; break;<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>}<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>}<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>\u5c31\u662f\u68c0\u67e5\u961f\u5217\u65f6\u5019\u76f4\u63a5\u8df3\u8fc7\u8fc7\u671f\u65f6\u95f4\u4e3a0\u7684\u90e8\u5206\uff0c\u8fd9\u6837\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\u3002\u4fee\u6539\u5b8c\u6bd5\uff0c\u91cd\u65b0\u7f16\u8bd1memcache\u5c31\u884c\u3002<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>(ps, \u4eca\u5929\u53d1\u73b0memcached 1.41\u7248\u672c\u589e\u52a0 -N \u53c2\u6570\uff0c\u53c2\u6570\u542b\u4e49\u4e3a return error on memory exhausted (allow removing items with expire time &gt; 0, just keep never-expire items), it could)<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>\u8fd8\u6709\u7b2c\u4e09\u79cd\u65b9\u6848\u662f\uff0c\u4fee\u6539memcached\u66f4\u65b0\u6570\u636e\u90a3\u90e8\u5206\uff0c\u53d1\u73b0\u6570\u636e\u88ab\u590d\u5199\u65f6\u5019\uff0c\u628a\u88ab\u8986\u76d6\u6570\u636e\u632a\u8d70\u3002\u4e5f\u662f\u8981\u4fee\u6539\u6e90\u4ee3\u7801\u3002<\/p> \r\n <p style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;'>&nbsp;<\/p> \r\n<\/div>\r\n ","excerpt":"\u00a0\u5b89\u88c5\u8fc7\u7a0b\uff1a1.\u4e0b\u8f7dwin\u7248memcached\uff0c\u5730\u5740\uff1ahttp:\/\/cloud.github.com\/downloads\/gwhalin\/Memcached-Java-Client\/java_memcached-release_2.6.2.zip2.\u89e3\u538b\u5230\u6307\u5b9a\u76ee\u5f55\uff0c\u6bd4\u5982\uff1ad:\\\\memcached-1.","author":"1","sortid":"19","type":"blog","views":"43","comnum":"0","tbcount":"0","attnum":"0","top":"n","hide":"n","allow_remark":"y","allow_tb":"y","password":"","thumb":"0","alias":""}