{"gid":"448","title":"memcache","date":"1416524400","content":"\r\n <div> \r\n <span style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>memcache\u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684\u5206\u5e03\u5f0f\u7684\u5185\u5b58\u5bf9\u8c61\u7f13\u5b58\u7cfb\u7edf\uff0c\u901a\u8fc7\u5728\u5185\u5b58\u91cc\u7ef4\u62a4\u4e00\u4e2a\u7edf\u4e00\u7684\u5de8\u5927\u7684hash\u8868\uff0c\u5b83\u80fd\u591f\u7528\u6765\u5b58\u50a8\u5404\u79cd\u683c\u5f0f\u7684\u6570\u636e\uff0c\u5305\u62ec\u56fe\u50cf\u3001\u89c6 \u9891\u3001\u6587\u4ef6\u4ee5\u53ca\u6570\u636e\u5e93\u68c0\u7d22\u7684\u7ed3\u679c\u7b49\u3002Memcache\u662fdanga.com\u7684\u4e00\u4e2a\u9879\u76ee\uff0c\u6700\u65e9\u662f\u4e3a LiveJournal \u670d\u52a1\u7684\uff0c\u6700\u521d\u4e3a\u4e86\u52a0\u901f LiveJournal \u8bbf\u95ee\u901f\u5ea6\u800c\u5f00\u53d1\u7684\uff0c\u540e\u6765\u88ab\u5f88\u591a\u5927\u578b\u7684\u7f51\u7ad9\u91c7\u7528\u3002\u76ee\u524d\u5168\u4e16\u754c\u4e0d\u5c11\u4eba\u4f7f\u7528\u8fd9\u4e2a\u7f13\u5b58\u9879\u76ee\u6765\u6784\u5efa\u81ea\u5df1\u5927\u8d1f\u8f7d\u7684\u7f51\u7ad9\uff0c\u6765\u5206\u62c5\u6570\u636e\u5e93\u7684\u538b\u529b\u3002\u4e3a\u4ec0\u4e48\u8981\u904d\u5386<\/span> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>&nbsp;&nbsp; \u76ee\u524d\uff0c\u7528\u5230memcache\u7684\u516c\u53f8\u548c\u7f51\u7ad9\u4e5f\u8d8a\u6765\u8d8a\u591a\u3002Memcache\u7684\u5ba2\u6237\u7aef\u64cd\u4f5c\u4e00\u822c\u90fd\u53ea\u63d0\u4f9b\u4e86get,set\u7b49\u7b80\u5355\u7684\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u90fd\u662f\u975e\u5e38\u9ad8\u6548\u7684\u3002 &nbsp;&nbsp;\u867d\u7136memcache\u662f\u4e2akey-value\u5b58\u50a8\u7684\u7cfb\u7edf\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u904d\u5386memcache\u7684\u6570\u636e\u3002&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/p> \r\n <span style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>\u5982\u4f55\u904d\u5386memcache&nbsp;&nbsp;&nbsp;stats\u547d\u4ee4<\/span> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>&nbsp;memcache\u7684stats\u547d\u4ee4\u5305\u62ec\uff1a<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;reset&nbsp;&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;malloc&nbsp;&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;maps&nbsp;&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;sizes&nbsp;&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;slabs&nbsp;&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;items&nbsp;&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;cachedump&nbsp;slab_id&nbsp;limit_num&nbsp;&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>9.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats&nbsp;detail&nbsp;[on|off|dump]&nbsp;&nbsp;<\/p> \r\n <span style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>\u901a\u8fc7\u547d\u4ee4\u5b8c\u6210\u904d\u5386<\/span> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \u901a\u8fc7\u8fd9\u4e9bstats\u547d\u4ee4\u6211\u4eec\u5c31\u53ef\u4ee5\u5b8c\u6210memcache\u5b58\u50a8\u7684\u5185\u5bb9\u7684\u904d\u5386\uff0cOK\uff0c\u4e0b\u9762\u6211\u4eec\u901a\u8fc7telnet\u76f4\u63a5\u8fde\u63a5\u5230memcache\u901a\u8fc7\u8fd9\u4e9b\u547d\u4ee4\u6765\u5b8c\u6210\u76f8\u5173\u7684\u64cd\u4f5c\u3002&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; telnet\u5230192.168.15.225\uff08\u5c40\u57df\u7f51\u6d4b\u8bd5\u673a\u5668\uff09\u7684memcache\u670d\u52a1\u5668<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'><img src='http:\/\/note.youdao.com\/yws\/res\/1213\/534CCC07D351416FADF9791263CC8B37' alt='memcache\u53d6\u51fakey=value - \u7f51\u7ad9\u7b14\u8bb0 - \u7f51\u7ad9\u7b14\u8bb0\u7684\u535a\u5ba2' style='height:auto;' data-media-type='image'><br>\u6267\u884cstats items\u547d\u4ee4\uff0c\u53ef\u4ee5\u770b\u5230\u51fa\u73b0 \u5f88\u591a\u7684items\u884c\u3002&nbsp;<br><img src='http:\/\/note.youdao.com\/yws\/res\/1211\/34545E5E70B04856A844FE02658FD846' alt='memcache\u53d6\u51fakey=value - \u7f51\u7ad9\u7b14\u8bb0 - \u7f51\u7ad9\u7b14\u8bb0\u7684\u535a\u5ba2' style='height:auto;' data-media-type='image'><br>\u6267\u884cstats cachedump 3 0\u547d\u4ee4\u3002\u8fd9\u91cc\u76843\u8868\u793a\u4e0a\u9762\u56fe\u4e2ditems\u540e\u9762\u7684\u6570\u5b57\uff0c0\u6807\u793a\u663e\u793a\u5168\u90e8\u7684\u6570\u636e\uff0c\u5982\u679c\u662f1\u5c31\u6807\u793a\u53ea\u663e\u793a1\u6761\u3002&nbsp;<br>\u4e0b\u56fe\u4e3a\u6267\u884c\u540e\u7684\u7ed3\u679c\uff0citem\u540e\u9762\u7684\u5b57\u7b26\u4e32\u4e3akey<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>&nbsp;<img src='http:\/\/note.youdao.com\/yws\/res\/1212\/5775E1A7194E4443A0A4BF60AC6F745F' alt='memcache\u53d6\u51fakey=value - \u7f51\u7ad9\u7b14\u8bb0 - \u7f51\u7ad9\u7b14\u8bb0\u7684\u535a\u5ba2' style='height:auto;' data-media-type='image'><br>&nbsp;\u901a\u8fc7\u4e0a\u9762\u5217\u51fa\u7684key\u6211\u4eec\u5c31\u53ef\u4ee5\u904d\u5386\u6240\u6709\u7684\u6570\u636e\u4e86\uff0c\u4e0b\u9762\u6211\u4eec\u53d6\u51fa\u67d0\u4e00\u6761\u6570\u636e\uff0ckey\u4e3aUc!uLh\u7684\u6570\u636e\u3002<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>&nbsp;&nbsp;<img src='http:\/\/note.youdao.com\/yws\/res\/1214\/62AAD0975DDE4ECE98A7E65FC65E98D9' alt='memcache\u53d6\u51fakey=value - \u7f51\u7ad9\u7b14\u8bb0 - \u7f51\u7ad9\u7b14\u8bb0\u7684\u535a\u5ba2' style='height:auto;' data-media-type='image'><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \u5230\u8fd9\u91cc\uff0c\u4f60\u4e5f\u8bb8\u660e\u767d\u4e86\u600e\u4e48\u53bb\u904d\u5386memcache\u7684\u6570\u636e\u4e86\u3002&nbsp;<\/p> \r\n <span style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>\u4ee3\u7801\u5b9e\u73b0<\/span> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \u4e0b\u9762\u8d34\u4e0a\u4e00\u6bb5php\u5b9e\u73b0\u7684\u904d\u5386memcache\u6570\u636e\u7684\u4ee3\u7801\uff0c\u5176\u4ed6\u8bed\u8a00\u53ef\u4ee5\u53c2\u8003\u4ee3\u7801\u81ea\u5df1\u5b9e\u73b0\u3002<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>\u4e0b\u9762\u8d34\u4e0a\u4e00\u6bb5php\u5b9e\u73b0\u7684\u904d\u5386memcache\u6570\u636e\u7684\u4ee3\u7801\uff0c\u5176\u4ed6\u8bed\u8a00\u53ef\u4ee5\u53c2\u8003\u4ee3\u7801\u81ea\u5df1\u5b9e\u73b0\u3002<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>&nbsp;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>1. &nbsp; &nbsp; &nbsp; &nbsp;&lt;?php<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>2. &nbsp; &nbsp; &nbsp; &nbsp;$host='192.168.15.225';<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>3. &nbsp; &nbsp; &nbsp; &nbsp;$port=11211;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>4. &nbsp; &nbsp; &nbsp; &nbsp;$mem=new Memcache();<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>5. &nbsp; &nbsp; &nbsp; &nbsp;$mem-&gt;connect($host,$port);<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>6. &nbsp; &nbsp; &nbsp; &nbsp;$items=$mem-&gt;getExtendedStats (\u2018items\u2019);<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>7. &nbsp; &nbsp; &nbsp; &nbsp;$items=$items['$host:$port']['items'];<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>8. &nbsp; &nbsp; &nbsp; &nbsp;foreach($items as $key=&gt;$values){<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>9. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$number=$key;;<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>10. &nbsp; &nbsp; &nbsp; &nbsp; $str=$mem-&gt;getExtendedStats ('cachedump',$number,0);<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>11. &nbsp; &nbsp; &nbsp; &nbsp; $line=$str['$host:$port'];<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>12. &nbsp; &nbsp; &nbsp; &nbsp; if( is_array($line) &amp;&amp; count($line)&gt;0){<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>13. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($line as $key=&gt;$value){<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>14. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo $key.'=&gt;';<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>15. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print_r($mem-&gt;get($key));<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>16. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '\\r\\n';<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>17. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>18. &nbsp; &nbsp; &nbsp; &nbsp; }<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>19. &nbsp; &nbsp; }<\/p> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>20. &nbsp; &nbsp; ?&gt;<\/p> \r\n <span style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>\u6269\u5c55\u529f\u80fd<\/span> \r\n <p style='color: rgb(44, 44, 44); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'>&nbsp;&nbsp;&nbsp;&nbsp; \u7531\u6b64\u53ef\u4ee5\u5b9e\u73b0\u67e5\u627ememcache\u67d0\u4e2a\u524d\u7f00\u7684key\u7684\u6570\u636e\uff0c\u6216\u8005\u67e5\u8be2\u67d0\u4e9bvalue\u7684key\u3002\u751a\u81f3\u5b9e\u73b0\u6570\u636e\u5e93\u7684like\u529f\u80fd\u3002\u8bf7\u6ce8\u610f\uff1a\u904d\u5386memcache\u7684\u64cd\u4f5c\u5e76\u6ca1\u6709memcache\u7684get\u64cd\u4f5c\u90a3\u4e48\u9ad8\u6548\u3002<\/p> \r\n<\/div>\r\n ","excerpt":"\u00a0memcache\u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684\u5206\u5e03\u5f0f\u7684\u5185\u5b58\u5bf9\u8c61\u7f13\u5b58\u7cfb\u7edf\uff0c\u901a\u8fc7\u5728\u5185\u5b58\u91cc\u7ef4\u62a4\u4e00\u4e2a\u7edf\u4e00\u7684\u5de8\u5927\u7684hash\u8868\uff0c\u5b83\u80fd\u591f\u7528\u6765\u5b58\u50a8\u5404\u79cd\u683c\u5f0f\u7684\u6570\u636e\uff0c\u5305\u62ec\u56fe\u50cf\u3001\u89c6\u9891\u3001\u6587\u4ef6\u4ee5\u53ca\u6570\u636e\u5e93\u68c0\u7d22\u7684\u7ed3\u679c\u7b49\u3002Memcache\u662fdanga.com\u7684\u4e00\u4e2a\u9879\u76ee\uff0c\u6700\u65e9\u662f\u4e3aLiveJournal\u670d\u52a1\u7684\uff0c\u6700\u521d\u4e3a\u4e86\u52a0\u901fLiveJourna","author":"1","sortid":"19","type":"blog","views":"49","comnum":"0","tbcount":"0","attnum":"0","top":"n","hide":"n","allow_remark":"y","allow_tb":"y","password":"","thumb":"0","alias":""}