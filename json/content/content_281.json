{"gid":"281","title":"\u3010\u95ee\u5e95\u3011\u738b\u5e05\uff1a\u6df1\u5165PHP\u5185\u6838\uff08\u4e8c\uff09\u2014\u2014SAPI\u63a2\u7a76","date":"1426028400","content":"\r\n <div> \r\n <h1 style='background-color:rgb(255, 255, 255);color:rgb(51, 51, 51);font-family:'Microsoft YaHei';font-size:28px;font-style:normal;font-weight:normal;text-align:left;'> \r\n  <div style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px;'> \r\n   <a href='http:\/\/www.csdn.net\/tag\/%E9%97%AE%E5%BA%95\/news' style='background-color:rgb(243, 243, 243);color:rgb(51, 51, 51);'>\u95ee\u5e95<\/a> \r\n   <a href='http:\/\/www.csdn.net\/tag\/%E7%8E%8B%E5%B8%85\/news' style='background-color:rgb(243, 243, 243);color:rgb(51, 51, 51);'>\u738b\u5e05<\/a> \r\n   <a href='http:\/\/www.csdn.net\/tag\/php\/news' style='background-color:rgb(243, 243, 243);color:rgb(51, 51, 51);'>PHP<\/a> \r\n  <\/div> \r\n  <div style='background-color: rgb(247, 247, 247); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px;'> \r\n   <strong>\u6458\u8981\uff1a<\/strong>PHP\u4f5c\u4e3a\u4e00\u95e8\u7b80\u5355\u800c\u5f3a\u5927\u7684\u8bed\u8a00\uff0c\u80fd\u591f\u63d0\u4f9b\u5f88\u591aWeb\u9002\u7528\u7684\u8bed\u8a00\u7279\u6027\u3002\u4ece\u5b9e\u8df5\u51fa\u53d1\uff0c\u7ee7\u5f31\u7c7b\u578b\u53d8\u91cf\u539f\u7406\u63a2\u7a76\u540e\uff0c\u738b\u5e05\u5c06\u7ee7\u7eed\u5e26\u5927\u5bb6\u5f04\u6e05PHP\u5185\u6838\u4e2d\u7684\u4e00\u4e9b\u5e38\u7528\u90e8\u5206\uff0c\u672c\u671f\u5219\u662fSAPI\u7684\u6df1\u5165\u7406\u89e3\u3002 \r\n  <\/div> \r\n  <div style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px;'> \r\n   <p>SAPI\u662fServer Application Programming Interface\uff08\u670d\u52a1\u5668\u5e94\u7528\u7f16\u7a0b\u63a5\u53e3\uff09\u7684\u7f29\u5199\u3002PHP\u901a\u8fc7SAPI\u63d0\u4f9b\u4e86\u4e00\u7ec4\u63a5\u53e3\uff0c\u4f9b\u5e94\u7528\u548cPHP\u5185\u6838\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u4ea4\u4e92\u3002<\/p> \r\n   <p>\u7b80\u5355\u7684\u8bb2\uff0c\u5c31\u50cf\u51fd\u6570\u7684\u8f93\u5165\u548c\u8f93\u51fa\u4e00\u6837\uff0c\u6211\u4eec\u901a\u8fc7Linux\u547d\u4ee4\u884c\u6267\u884c\u4e00\u6bb5PHP\u4ee3\u7801\uff0c\u672c\u8d28\u662fLinux\u7684Shell\u901a\u8fc7PHP\u7684SAPI\u4f20\u5165\u4e00\u7ec4\u53c2\u6570\uff0cZend\u5f15\u64ce\u6267\u884c\u540e\uff0c\u8fd4\u56de\u7ed9shell\uff0c\u7531shell\u663e\u793a\u51fa\u6765\u7684\u8fc7\u7a0b\u3002\u540c\u6837\u7684\uff0c\u901a\u8fc7Apache\u8c03\u7528PHP\uff0c\u901a\u8fc7Web\u670d\u52a1\u5668\u7ed9SAPI\u4f20\u5165\u6570\u636e\uff0cZend\u5f15\u64ce\u6267\u884c\u540e\uff0c\u8fd4\u56de\u7ed9Apache\uff0c\u7531Apache\u663e\u793a\u5728\u9875\u9762\u4e0a\u3002<\/p> \r\n   <p style='text-align:center;'><a href='http:\/\/cms.csdnimg.cn\/article\/201409\/26\/54250531d9869.jpg' target='_blank' style='color:rgb(0, 102, 204);'><img src='http:\/\/note.youdao.com\/yws\/res\/2470\/B261FD7BBABD49C4AC7CE55351A3A407' data-media-type='image'>&nbsp;<\/a><br><\/p> \r\n   <p style='text-align:center;'><b>\u56fe1. PHP\u67b6\u6784\u56fe<\/b>&nbsp;<br><\/p> \r\n   <p>PHP\u63d0\u4f9b\u5f88\u591a\u79cd\u5f62\u5f0f\u7684\u63a5\u53e3\uff0c\u5305\u62ecapache\u3001apache2filter\u3001apache2handler\u3001caudium\u3001cgi \u3001cgi-fcgi\u3001cli\u3001cli-server\u3001continuity\u3001embed\u3001isapi\u3001litespeed\u3001milter\u3001nsapi\u3001phttpd pi3web\u3001roxen\u3001thttpd\u3001tux\u548cwebjames\u3002\u4f46\u662f\u5e38\u7528\u7684\u53ea\u67095\u79cd\u5f62\u5f0f\uff0cCLI\/CGI\uff08\u547d\u4ee4\u884c\uff09\u3001Multiprocess\uff08\u591a\u8fdb\u7a0b\uff09\u3001Multithreaded\uff08\u591a\u7ebf\u7a0b\uff09\u3001FastCGI\u548cEmbedded\uff08\u5185\u5d4c\uff09\u3002<\/p> \r\n   <p>PHP\u63d0\u4f9b\u4e86\u4e00\u4e2a\u51fd\u6570\u67e5\u770b\u5f53\u524dSAPI\u63a5\u53e3\u7c7b\u578b\uff1a<\/p> \r\n   <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n    <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n     <b>[php]<\/b>&nbsp; \r\n     <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n     <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n     <a title='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791' target='_blank' style='color: rgb(160, 160, 160);'><img src='http:\/\/note.youdao.com\/yws\/res\/2472\/E6EBD27B4EC0404598CE3EEA700BA84E' alt='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n     <a title='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791\/fork' target='_blank' style='color: rgb(160, 160, 160);'><img src='https:\/\/code.csdn.net\/assets\/ico_fork.svg' alt='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n    <\/div> \r\n    <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>string&nbsp;php_sapi_name&nbsp;(&nbsp;void&nbsp;)&nbsp;&nbsp;<\/span><\/li> \r\n    <\/ol> \r\n   <\/div> \r\n  <\/div><\/h1> \r\n <h3><b>PHP\u7684\u8fd0\u884c\u548c\u52a0\u8f7d<\/b><\/h3> \r\n <h1 style='background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 28px; font-weight: normal;'> \r\n  <div style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px;'> \r\n   <p>\u65e0\u8bba\u4f7f\u7528\u54ea\u79cdSAPI\uff0c\u5728PHP\u6267\u884c\u811a\u672c\u524d\u540e\uff0c\u90fd\u5305\u542b\u4e00\u7cfb\u5217\u4e8b\u4ef6\uff1aModule\u7684Init(MINT)\u548cShutdown(MSHUTDOWN)\uff0cRequest \u7684Init(RINT)\u548cShutdown(RSHUTDOWN)\u3002 \u7b2c\u4e00\u9636\u6bb5\u662fPHP\u6a21\u5757\u521d\u59cb\u5316\u9636\u6bb5\uff08MINT\uff09\uff0c\u53ef\u4ee5\u521d\u59cb\u5316\u6269\u5c55\u5185\u90e8\u53d8\u91cf\u3001\u5206\u914d\u8d44\u6e90\u548c\u6ce8\u518c\u8d44\u6e90\u5904\u7406\u5668\uff0c\u5728\u6574\u4e2aPHP\u5b9e\u4f8b\u751f\u547d\u5468\u671f\u5185\uff0c\u8be5\u8fc7\u7a0b\u53ea\u6267\u884c\u4e00\u6b21\u3002<\/p> \r\n   <p>\u4ec0\u4e48\u662fPHP\u6a21\u5757\uff1f\u901a\u8fc7\u4e0a\u9762\u7684PHP\u67b6\u6784\u56fe\uff0c\u5728PHP\u4e2d\u53ef\u4ee5\u4f7f\u7528get_loaded_extensions \u51fd\u6570\u6765\u67e5\u770b\u6240\u6709\u7f16\u8bd1\u5e76\u52a0\u8f7d\u7684\u6a21\u5757\/\u6269\u5c55\uff0c\u76f8\u5f53\u4e8eCLI\u6a21\u5f0f\u4e0b\u7684php -m\u3002<\/p> \r\n   <p>\u4ee5PHP\u7684Memcached\u6269\u5c55\u6e90\u4ee3\u7801\u4e3a\u4f8b\uff1a<\/p> \r\n   <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n    <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n     <b>[php]<\/b>&nbsp; \r\n     <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n     <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n     <a title='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791' target='_blank' style='color: rgb(160, 160, 160);'><img src='http:\/\/note.youdao.com\/yws\/res\/2472\/E6EBD27B4EC0404598CE3EEA700BA84E' alt='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n     <a title='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791\/fork' target='_blank' style='color: rgb(160, 160, 160);'><img src='https:\/\/code.csdn.net\/assets\/ico_fork.svg' alt='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n    <\/div> \r\n    <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>PHP_MINIT_FUNCTION(memcached)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;zend_class_entry&nbsp;ce;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;memcpy(&amp;memcached_object_handlers,zend_get_std_object_handlers(),&nbsp;sizeof(zend_object_handlers));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>memcached_object_handlers.clone_obj&nbsp;=&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;\u6267\u884c\u4e86\u4e00\u4e9b\u7c7b\u4f3c\u7684\u521d\u59cb\u5316\u64cd\u4f5c&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'><span style='color: rgb(0, 102, 153); font-weight: 700;'>return<\/span>&nbsp;SUCCESS;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>}&nbsp;&nbsp;<\/span><\/li> \r\n    <\/ol> \r\n   <\/div>\u7b2c\u4e8c\u9636\u6bb5\u662f\u8bf7\u6c42\u521d\u59cb\u5316\u9636\u6bb5\uff08RINT\uff09\uff0c\u5728\u6a21\u5757\u521d\u59cb\u5316\u5e76\u6fc0\u6d3b\u540e\uff0c\u4f1a\u521b\u5efaPHP\u8fd0\u884c\u73af\u5883\uff0c\u540c\u65f6\u8c03\u7528\u6240\u6709\u6a21\u5757\u6ce8\u518c\u7684RINT\u51fd\u6570\uff0c\u8c03\u7528\u6bcf\u4e2a\u6269\u5c55\u7684\u8bf7\u6c42\u521d\u59cb\u5316\u51fd\u6570 \uff0c\u8bbe\u5b9a\u7279\u5b9a\u7684\u73af\u5883\u53d8\u91cf\u3001\u5206\u914d\u8d44\u6e90\u6216\u6267\u884c\u5176\u4ed6\u4efb\u52a1\uff0c\u5982\u5ba1\u6838\u3002 \r\n   <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n    <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n     <b>[php]<\/b>&nbsp; \r\n     <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n     <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n     <a title='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791' target='_blank' style='color: rgb(160, 160, 160);'><img src='http:\/\/note.youdao.com\/yws\/res\/2472\/E6EBD27B4EC0404598CE3EEA700BA84E' alt='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n     <a title='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791\/fork' target='_blank' style='color: rgb(160, 160, 160);'><img src='https:\/\/code.csdn.net\/assets\/ico_fork.svg' alt='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n    <\/div> \r\n    <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>PHP_RINIT_FUNCTION(memcached)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;\u6267\u884c\u4e00\u4e9b\u5173\u4e8e\u8bf7\u6c42\u7684\u521d\u59cb\u5316&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 102, 153); font-weight: 700;'>return<\/span>&nbsp;SUCCESS;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>}&nbsp;&nbsp;<\/span><\/li> \r\n    <\/ol> \r\n   <\/div> \r\n   <p>\u7b2c\u4e09\u9636\u6bb5\uff0c\u8bf7\u6c42\u5904\u7406\u5b8c\u6210\u540e\uff0c\u4f1a\u8c03\u7528PHP_RSHUTDOWN_FUNCTION\u8fdb\u884c\u56de\u6536\uff0c\u8fd9\u662f\u6bcf\u4e2a\u6269\u5c55\u7684\u8bf7\u6c42\u5173\u95ed\u51fd\u6570\uff0c\u6267\u884c\u6700\u540e\u7684\u6e05\u7406\u5de5\u4f5c\u3002Zend\u5f15\u64ce\u6267\u884c\u6e05\u7406\u8fc7\u7a0b\u3001\u5783\u573e\u6536\u96c6\u3001\u5bf9\u4e4b\u524d\u7684\u8bf7\u6c42\u671f\u95f4\u7528\u5230\u7684\u6bcf\u4e2a\u53d8\u91cf\u6267\u884cunset\u3002\u8bf7\u6c42\u5b8c\u6210\u53ef\u80fd\u662f\u6267\u884c\u5230\u811a\u672c\u5b8c\u6210\uff0c\u4e5f\u53ef\u80fd\u662f\u8c03\u7528die()\u6216exit()\u51fd\u6570\u5b8c\u6210<\/p> \r\n   <p>\u7b2c\u56db\u9636\u6bb5\uff0c\u5f53PHP\u751f\u547d\u5468\u671f\u7ed3\u675f\u65f6\u5019\uff0cPHP_MSHUTDOWN_FUNCTION\u5bf9\u6a21\u5757\u8fdb\u884c\u56de\u6536\u5904\u7406\uff0c\u8fd9\u662f\u6bcf\u4e2a\u6269\u5c55\u7684\u6a21\u5757\u5173\u95ed\u51fd\u6570\uff0c\u7528\u4e8e\u5173\u95ed\u81ea\u5df1\u7684\u5185\u6838\u5b50\u7cfb\u7edf\u3002<\/p> \r\n   <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n    <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n     <b>[php]<\/b>&nbsp; \r\n     <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n     <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n     <a title='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791' target='_blank' style='color: rgb(160, 160, 160);'><img src='http:\/\/note.youdao.com\/yws\/res\/2472\/E6EBD27B4EC0404598CE3EEA700BA84E' alt='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n     <a title='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791\/fork' target='_blank' style='color: rgb(160, 160, 160);'><img src='https:\/\/code.csdn.net\/assets\/ico_fork.svg' alt='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n    <\/div> \r\n    <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>PHP_MSHUTDOWN_FUNCTION(memcached)&nbsp;{&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;\u6267\u884c\u5173\u4e8e\u6a21\u5757\u7684\u9500\u6bc1\u5de5\u4f5c&nbsp;*\/<\/span>&nbsp;UNREGISTER_INI_ENTRIES();&nbsp;<span style='color: rgb(0, 102, 153); font-weight: 700;'>return<\/span>&nbsp;SUCCESS;&nbsp;}&nbsp;&nbsp;<\/span><\/li> \r\n    <\/ol> \r\n   <\/div> \r\n  <\/div><\/h1> \r\n <h3><b>\u5e38\u89c1\u7684\u8fd0\u884c\u6a21\u5f0f<\/b><\/h3> \r\n <h1 style='background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 28px; font-weight: normal;'> \r\n  <div style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px;'> \r\n   <p>\u5e38\u89c1\u7684SAPI\u6a21\u5f0f\u6709\u4e94\u79cd\uff1a<\/p> \r\n   <ul> \r\n    <li>CLI\u548cCGI\u6a21\u5f0f\uff08\u5355\u8fdb\u7a0b\u6a21\u5f0f\uff09<\/li> \r\n    <li>\u591a\u8fdb\u7a0b\u6a21\u5f0f<\/li> \r\n    <li>\u591a\u7ebf\u7a0b\u6a21\u5f0f<\/li> \r\n    <li>FastCGI\u6a21\u5f0f<\/li> \r\n    <li>\u5d4c\u5165\u5f0f<\/li> \r\n   <\/ul> \r\n   <p><b>1. CLI\/CGI\u6a21\u5f0f<\/b><\/p> \r\n   <p>CLI\u548cCGI\u90fd\u5c5e\u4e8e\u5355\u8fdb\u7a0b\u6a21\u5f0f\uff0cPHP\u7684\u751f\u547d\u5468\u671f\u5728\u4e00\u6b21\u8bf7\u6c42\u4e2d\u5b8c\u6210\u3002\u4e5f\u5c31\u662f\u8bf4\u6bcf\u6b21\u6267\u884cPHP\u811a\u672c\uff0c\u90fd\u4f1a\u6267\u884c\u7b2c\u4e8c\u90e8\u5206\u8bb2\u7684\u56db\u4e2aINT\u548cShutdown\u4e8b\u4ef6\u3002<\/p> \r\n   <p style='text-align:center;'><a href='http:\/\/cms.csdnimg.cn\/article\/201409\/26\/54251087a4b70.jpg' target='_blank' style='color:rgb(0, 102, 204);'><img src='http:\/\/note.youdao.com\/yws\/res\/2473\/3FCF5DAC7E7D407293C14C25402F5E07' data-media-type='image'><\/a><\/p> \r\n   <p style='text-align:center;'><b>\u56fe2. CGI\/CLI\u751f\u547d\u5468\u671f<\/b>&nbsp;<br><\/p> \r\n   <p><b>2. \u591a\u8fdb\u7a0b\u6a21\u5f0f\uff08Multiprocess\uff09<\/b><\/p> \r\n   <p>\u591a\u8fdb\u7a0b\u6a21\u5f0f\u53ef\u4ee5\u5c06PHP\u5185\u7f6e\u5230Web Server\u4e2d\uff0cPHP\u53ef\u4ee5\u7f16\u8bd1\u6210Apache\u4e0b\u7684prefork MPM\u6a21\u5f0f\u548cAPXS\u6a21\u5757\uff0c\u5f53Apache\u542f\u52a8\u540e\uff0c\u4f1afork\u5f88\u591a\u5b50\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u62e5\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u3002<\/p> \r\n   <p style='text-align:center;'><a href='http:\/\/cms.csdnimg.cn\/article\/201409\/26\/54251138db3d3.jpg' target='_blank' style='color:rgb(0, 102, 204);'><img src='http:\/\/note.youdao.com\/yws\/res\/2467\/64E384CA63CE4D859A8E29AB81EBB1BE' data-media-type='image'>&nbsp;<\/a><br><\/p> \r\n   <p style='text-align:center;'><b>\u56fe3. \u591a\u8fdb\u7a0b\u6a21\u5f0f\u751f\u547d\u5468\u671f<\/b>&nbsp;<br><\/p> \r\n   <p>\u5728\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u4e2d\uff0cPHP\u7684\u751f\u547d\u5468\u671f\u662f\u8c03\u7528MINT\u542f\u52a8\u540e\uff0c\u6267\u884c\u591a\u6b21\u8bf7\u6c42\uff08RINT\/RSHUTDOWN)\uff0c\u5728Apache\u5173\u95ed\u6216\u8fdb\u7a0b\u7ed3\u675f\u540e\uff0c\u624d\u4f1a\u8c03\u7528MSHUTDOWN\u8fdb\u884c\u56de\u6536\u9636\u6bb5\u3002&nbsp;<br><\/p> \r\n   <p style='text-align:center;'><a href='http:\/\/cms.csdnimg.cn\/article\/201409\/26\/542511593efc6.jpg' target='_blank' style='color:rgb(0, 102, 204);'><img src='http:\/\/note.youdao.com\/yws\/res\/2469\/717B70B50226414A9FE433E34968F1A5' data-media-type='image'>&nbsp;<\/a><br><\/p> \r\n   <p style='text-align:center;'><b>\u56fe4. \u591a\u8fdb\u7a0b\u7684\u751f\u547d\u5468\u671f<\/b>&nbsp;<br><\/p> \r\n   <p>\u591a\u8fdb\u7a0b\u6a21\u578b\u4e2d\uff0c\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u90fd\u662f\u72ec\u7acb\u8fd0\u884c\uff0c\u6ca1\u6709\u4ee3\u7801\u548c\u6570\u636e\u5171\u4eab\uff0c\u56e0\u6b64\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u7ec8\u6b62\u9000\u51fa\u548c\u91cd\u65b0\u751f\u6210\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u5b50\u8fdb\u7a0b\u7684\u7a33\u5b9a\u3002<\/p> \r\n   <p><b>3. \u591a\u7ebf\u7a0b\u6a21\u5f0f\uff08Multithreaded)<\/b><\/p> \r\n   <p>Apache2\u7684Worker MPM\u91c7\u7528\u4e86\u591a\u7ebf\u7a0b\u6a21\u578b\uff0c\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e0b\u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\uff0c\u5728\u540c\u4e00\u4e2a\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u6267\u884c\u3002<\/p> \r\n   <p><a href='http:\/\/cms.csdnimg.cn\/article\/201409\/26\/5425121315567.jpg' target='_blank' style='color:rgb(0, 102, 204);'><img src='http:\/\/note.youdao.com\/yws\/res\/2468\/885B9539DD0548B1B2E74DCFBB96E2F2' data-media-type='image'><\/a><br><\/p> \r\n   <p style='text-align:center;'><b>\u56fe5. \u591a\u7ebf\u7a0b\u751f\u547d\u5468\u671f<\/b><\/p> \r\n   <p><b>4. FastCGI\u6a21\u5f0f<\/b><\/p> \r\n   <p>\u5728\u6211\u4eec\u7528\u7684Nginx+PHP-FPM\u7528\u7684\u5c31\u662fFastCGI\u6a21\u5f0f\uff0cFastcgi\u662f\u4e00\u79cd\u7279\u6b8a\u7684CGI\u6a21\u5f0f\uff0c\u662f\u4e00\u79cd\u5e38\u9a7b\u8fdb\u7a0b\u7c7b\u578b\u7684CGI\uff0c\u8fd0\u884c\u540e\u53ef\u4ee5Fork\u591a\u4e2a\u8fdb\u7a0b\uff0c\u4e0d\u7528\u82b1\u8d39\u65f6\u95f4\u52a8\u6001\u7684Fork\u5b50\u8fdb\u7a0b\uff0c\u4e5f\u4e0d\u9700\u8981\u6bcf\u6b21\u8bf7\u6c42\u90fd\u8c03\u7528MINT\/MSHUTDOWN\u3002PHP\u901a\u8fc7PHP-FPM\u6765\u7ba1\u7406\u548c\u8c03\u5ea6FastCGI\u7684\u8fdb\u7a0b\u6c60\u3002Nginx\u548cPHP-FPM\u901a\u8fc7\u672c\u5730\u7684TCP Socket\u548cUnix Socket \u8fdb\u884c\u901a\u4fe1\u3002<\/p> \r\n   <p style='text-align:center;'><a href='http:\/\/cms.csdnimg.cn\/article\/201409\/26\/5425123c7442f.jpg' target='_blank' style='color:rgb(0, 102, 204);'><img src='http:\/\/note.youdao.com\/yws\/res\/2471\/DE0D37936F8A47DF95B6737F4FB6B1D9' data-media-type='image'>&nbsp;<\/a><br><\/p> \r\n   <p style='text-align:center;'><b>\u56fe6. FastCGI\u6a21\u5f0f\u751f\u547d\u5468\u671f<\/b><\/p> \r\n   <p>PHP-FPM\u8fdb\u7a0b\u7ba1\u7406\u5668\u81ea\u8eab\u521d\u59cb\u5316\uff0c\u542f\u52a8\u591a\u4e2aCGI\u89e3\u91ca\u5668\u8fdb\u7a0b\u7b49\u5f85\u6765\u81eaNginx\u7684\u8bf7\u6c42\u3002\u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u8fbe\u5230PHP-FPM\uff0c\u7ba1\u7406\u5668\u9009\u62e9\u5230\u4e00\u4e2aCGI\u8fdb\u7a0b\u8fdb\u884c\u5904\u7406\uff0cNginx\u5c06CGI\u73af\u5883\u53d8\u91cf\u548c\u6807\u51c6\u8f93\u5165\u53d1\u9001\u5230\u4e00\u4e2aPHP-CIG\u5b50\u8fdb\u7a0b\u3002PHP-CGI\u5b50\u8fdb\u7a0b\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u9519\u8bef\u4fe1\u606f\u8fd4\u56de\u7ed9Nginx\uff0c\u5f53PHP-CGI\u5b50\u8fdb\u7a0b\u5173\u95ed\u8fde\u63a5\u65f6\uff0c\u8bf7\u6c42\u5904\u7406\u5b8c\u6210\u3002PHP-CGI\u5b50\u8fdb\u7a0b\u7b49\u5f85\u7740\u4e0b\u4e00\u4e2a\u8fde\u63a5\u3002<\/p> \r\n   <p>\u53ef\u4ee5\u60f3\u8c61CGI\u7684\u7cfb\u7edf\u5f00\u9500\u6709\u591a\u5927\u3002\u6bcf\u4e00\u4e2aWeb \u8bf7\u6c42PHP\u90fd\u5fc5\u987b\u91cd\u65b0\u89e3\u6790php.ini\u3001\u8f7d\u5165\u5168\u90e8\u6269\u5c55\u5e76\u59cb\u5316\u5168\u90e8\u6570\u636e\u7ed3\u6784\u3002\u4f7f\u7528FastCGI\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u53ea\u5728\u8fdb\u7a0b\u542f\u52a8\u65f6\u53d1\u751f\u4e00\u6b21\u3002\u53e6\u5916\uff0c\u5bf9\u4e8e\u6570\u636e\u5e93\u548cMemcache\u7684\u6301\u7eed\u8fde\u63a5\u53ef\u4ee5\u5de5\u4f5c\u3002<\/p> \r\n   <p><b>5. \u5185\u5d4c\u6a21\u5f0f\uff08Embedded\uff09<\/b><\/p> \r\n   <p>Embed SAPI\u662f\u4e00\u79cd\u7279\u6b8a\u7684SAPI\uff0c\u5141\u8bb8\u5728C\/C++\u8bed\u8a00\u4e2d\u8c03\u7528PHP\u63d0\u4f9b\u7684\u51fd\u6570\u3002\u8fd9\u79cdSAPI\u548cCLI\u6a21\u5f0f\u4e00\u6837\uff0c\u6309\u7167Module Init =&gt; Request Init =&gt; Request =&gt; Request Shutdown =&gt; Module Shutdown\u7684\u6a21\u5f0f\u8fd0\u884c\u3002<\/p> \r\n   <p>Embed SAPI\u53ef\u4ee5\u8c03\u7528PHP\u4e30\u5bcc\u7684\u7c7b\u5e93\uff0c\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u7ea7\u73a9\u6cd5\uff0c\u6bd4\u5982\u53ef\u4ee5\u67e5\u770bPHP\u7684OPCODE\uff08PHP\u6267\u884c\u7684\u4e2d\u95f4\u7801\uff0cZend\u5f15\u64ce\u7684\u6307\u4ee4\uff0c\u7531PHP\u4ee3\u7801\u751f\u6210\uff09\u3002<\/p> \r\n   <p>\u8be6\u7ec6\u8bf7\u89c1\uff1a&nbsp;<a href='http:\/\/www.laruence.com\/2008\/09\/23\/539.html' target='_blank' style='color:rgb(0, 102, 204);'>http:\/\/www.laruence.com\/2008\/09\/23\/539.html<\/a><\/p> \r\n  <\/div><\/h1> \r\n <h3><b>SAPI\u7684\u8fd0\u884c\u673a\u5236<\/b><\/h3> \r\n <h1 style='background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 28px; font-weight: normal;'> \r\n  <div style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px;'> \r\n   <p>\u6211\u4eec\u4ee5CGI\u4e3a\u4f8b\uff0c\u770b\u4e00\u4e0bSAPI\u7684\u8fd0\u884c\u673a\u5236\u3002<\/p> \r\n   <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n    <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n     <b>[php]<\/b>&nbsp; \r\n     <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n     <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n     <a title='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791' target='_blank' style='color: rgb(160, 160, 160);'><img src='http:\/\/note.youdao.com\/yws\/res\/2472\/E6EBD27B4EC0404598CE3EEA700BA84E' alt='\u5728CODE\u4e0a\u67e5\u770b\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n     <a title='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' href='https:\/\/code.csdn.net\/snippets\/475791\/fork' target='_blank' style='color: rgb(160, 160, 160);'><img src='https:\/\/code.csdn.net\/assets\/ico_fork.svg' alt='\u6d3e\u751f\u5230\u6211\u7684\u4ee3\u7801\u7247' width='12' height='12' data-media-type='image'><\/a> \r\n    <\/div> \r\n    <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'><span style='color: rgb(0, 102, 153); font-weight: 700;'>static<\/span>&nbsp;sapi_module_struct&nbsp;cgi_sapi_module&nbsp;=&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 0, 255);'>'cgi-fcgi'<\/span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;\u8f93\u51fa\u7ed9php_info()\u4f7f\u7528&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 0, 255);'>'CGI\/FastCGI'<\/span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;pretty&nbsp;name&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;php_cgi_startup,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;startup&nbsp;\u5f53SAPI\u521d\u59cb\u5316\u65f6\uff0c\u9996\u5148\u4f1a\u8c03\u7528\u8be5\u51fd\u6570&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;php_module_shutdown_wrapper,&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;shutdown&nbsp;&nbsp;\u5173\u95ed\u51fd\u6570\u5305\u88c5\u5668\uff0c\u5b83\u7528\u6765\u91ca\u653e\u6240\u6709\u7684SAPI\u7684\u6570\u636e\u7ed3\u6784\u3001\u5185\u5b58\u7b49\uff0c\u8c03\u7528php_module_shutdown&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_activate,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;activate&nbsp;&nbsp;\u6b64\u51fd\u6570\u4f1a\u5728\u6bcf\u4e2a\u8bf7\u6c42\u5f00\u59cb\u65f6\u8c03\u7528\uff0c\u5b83\u4f1a\u505a\u521d\u59cb\u5316\uff0c\u8d44\u6e90\u5206\u914d&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_deactivate,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;deactivate&nbsp;&nbsp;\u6b64\u51fd\u6570\u4f1a\u5728\u6bcf\u4e2a\u8bf7\u6c42\u7ed3\u675f\u65f6\u8c03\u7528\uff0c\u5b83\u7528\u6765\u786e\u4fdd\u6240\u6709\u7684\u6570\u636e\u90fd\u5f97\u5230\u91ca\u653e&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_ub_write,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;unbuffered&nbsp;write&nbsp;&nbsp;\u4e0d\u7f13\u5b58\u7684\u5199\u64cd\u4f5c(unbuffered&nbsp;write)\uff0c\u5b83\u662f\u7528\u6765\u5411SAPI\u5916\u90e8\u8f93\u51fa\u6570\u636e&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_flush,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;flush&nbsp;&nbsp;\u5237\u65b0\u8f93\u51fa\uff0c\u5728CLI\u6a21\u5f0f\u4e0b\u901a\u8fc7\u4f7f\u7528C\u8bed\u8a00\u7684\u5e93\u51fd\u6570fflush\u5b9e\u73b0*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;get&nbsp;uid&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_getenv,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;getenv&nbsp;\u6839\u636ename\u67e5\u627e\u73af\u5883\u53d8\u91cf&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;php_error,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;error&nbsp;handler&nbsp;\u6ce8\u518c\u9519\u8bef\u5904\u7406\u51fd\u6570&nbsp;&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;header&nbsp;handler&nbsp;PHP\u8c03\u7528header()\u65f6\u5019\u88ab\u8c03\u7528&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_send_headers,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;send&nbsp;headers&nbsp;handler&nbsp;\u53d1\u9001\u5934\u90e8\u4fe1\u606f*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;send&nbsp;header&nbsp;handler&nbsp;\u53d1\u9001\u4e00\u4e2a\u5355\u72ec\u7684\u5934\u90e8\u4fe1\u606f&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_read_post,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;read&nbsp;POST&nbsp;data&nbsp;&nbsp;\u5f53\u8bf7\u6c42\u7684\u65b9\u6cd5\u662fPOST\u65f6\uff0c\u7a0b\u5e8f\u83b7\u53d6POST\u6570\u636e\uff0c\u5199\u5165$_POST\u6570\u7ec4&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_read_cookies,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;read&nbsp;Cookies&nbsp;\u83b7\u53d6Cookie\u503c&nbsp;&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_register_variables,&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;register&nbsp;server&nbsp;variables&nbsp;\u7ed9$_SERVER\u6dfb\u52a0\u73af\u5883\u53d8\u91cf&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;sapi_cgi_log_message,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;Log&nbsp;message&nbsp;\u8f93\u51fa\u9519\u8bef\u4fe1\u606f&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;Get&nbsp;request&nbsp;time&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;Child&nbsp;terminate&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;&nbsp;&nbsp;&nbsp;STANDARD_SAPI_MODULE_PROPERTIES&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n     <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>};&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n    <\/ol> \r\n   <\/div> \r\n   <p>\u7531\u4e0a\u9762\u4ee3\u7801\u53ef\u89c1\uff0cPHP\u7684SAPI\u50cf\u662f\u9762\u5411\u5bf9\u8c61\u4e2d\u57fa\u7c7b\uff0cSAPI.h\u548cSAPI.c\u5305\u542b\u7684\u51fd\u6570\u662f\u62bd\u8c61\u57fa\u7c7b\u7684\u58f0\u660e\u548c\u5b9a\u4e49\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u7528\u7684SAPI\u6a21\u5f0f\uff0c\u5219\u662f\u7ee7\u627f\u4e86\u8fd9\u4e2a\u57fa\u7c7b\uff0c\u5e76\u91cd\u65b0\u5b9a\u4e49\u57fa\u7c7b\u65b9\u6cd5\u7684\u5b50\u7c7b\u3002<\/p> \r\n  <\/div><\/h1> \r\n <h3><b>\u603b\u7ed3<\/b><\/h3> \r\n <h1 style='background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 28px; font-weight: normal;'> \r\n  <div style='background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px;'> \r\n   <p>PHP\u7684SAPI\u662fZend\u5f15\u64ce\u63d0\u4f9b\u7684\u4e00\u7ec4\u6807\u51c6\u4ea4\u4e92\u63a5\u53e3\uff0c\u901a\u8fc7\u6ce8\u518c\u521d\u59cb\u5316\u3001\u6790\u6784\u3001\u8f93\u5165\u3001\u8f93\u51fa\u7b49\u63a5\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u5728Zend\u5f15\u64ce\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u628aPHP\u5d4c\u5165\u5230\u7c7b\u4f3cApache\u7684Web Server\u4e2d\u3002PHP\u5e38\u89c1\u7684SAPI\u6a21\u5f0f\u6709\u4e94\u79cd\uff0cCGI\/CLI\u6a21\u5f0f\u3001\u591a\u8fdb\u7a0b\u6a21\u5f0f\u3001\u591a\u7ebf\u7a0b\u6a21\u5f0f\u3001FastCGI\u6a21\u5f0f\u548c\u5185\u5d4c\u6a21\u5f0f\u3002<\/p> \r\n   <p>\u4e86\u89e3PHP\u7684SAPI\u673a\u5236\u610f\u4e49\u91cd\u5927\uff0c\u5e2e\u52a9\u6211\u4eec\u7406\u89e3PHP\u7684\u751f\u547d\u5468\u671f\uff0c\u5e76\u4e86\u89e3\u5982\u4f55\u66f4\u597d\u7684\u901a\u8fc7C\/C++\u4e3aPHP\u7f16\u5199\u6269\u5c55\uff0c\u5e76\u5728\u751f\u547d\u5468\u671f\u4e2d\u627e\u5230\u63d0\u9ad8\u7cfb\u7edf\u6027\u80fd\u7684\u65b9\u5f0f\u3002<\/p> \r\n   <p><b><font color='#e36c09'>\u5173\u4e8e\u4f5c\u8005\uff1a\u738b\u5e05\uff0c\u817e\u8baf\u4f01\u4e1aQQ SaaS\u56e2\u961fLeader\u3002<\/font><\/b><br><\/p> \r\n   <p><b>\u66f4\u591a\u300a\u95ee\u5e95\u300b\u5185\u5bb9<\/b><\/p> \r\n   <ul> \r\n    <li><a href='http:\/\/www.csdn.net\/article\/2014-09-11\/2821642-data-mining-by-Lanceyan' style='color:rgb(0, 102, 204);'>\u3010\u95ee\u5e95\u3011\u4e25\u6f9c\uff1a\u6570\u636e\u6316\u6398\u5165\u95e8\uff08\u4e00\uff09\u2014\u2014\u5206\u8bcd<\/a><\/li> \r\n    <li><a href='http:\/\/www.csdn.net\/article\/2014-09-10\/2821615-how-twitter-uses-redis-to-scale-105tb-ram-39mm-qps-10000-ins' style='color:rgb(0, 102, 204);'>\u3010\u95ee\u5e95\u3011Yao Yu\u8c08Twitter\u7684\u767eTB\u7ea7Redis\u7f13\u5b58\u5b9e\u8df5<\/a><\/li> \r\n    <li><a href='http:\/\/www.csdn.net\/article\/2014-09-15\/2821685-exploring-of-the-php' style='color:rgb(0, 102, 204);'>\u3010\u95ee\u5e95\u3011\u738b\u5e05\uff1a\u6df1\u5165PHP\u5185\u6838\uff08\u4e00\uff09\u2014\u2014\u5f31\u7c7b\u578b\u53d8\u91cf\u539f\u7406\u63a2\u7a76<\/a>&nbsp;<\/li> \r\n    <li><a href='http:\/\/www.csdn.net\/article\/2014-09-26\/2821885-exploring-of-the-php-2' style='color:rgb(0, 102, 204);'>\u3010\u95ee\u5e95\u3011\u738b\u5e05\uff1a\u6df1\u5165PHP\u5185\u6838\uff08\u4e8c\uff09\u2014\u2014SAPI\u63a2\u7a76<\/a><br><\/li> \r\n    <li><a href='http:\/\/www.csdn.net\/article\/2014-09-25\/2821866' style='color:rgb(0, 102, 204);'>\u3010\u95ee\u5e95\u3011\u9759\u884c\uff1aFastJSON\u5b9e\u73b0\u8be6\u89e3<\/a>&nbsp;<br><\/li> \r\n   <\/ul> \r\n   <b>\u300a\u95ee\u5e95\u300b\u662f<span style='color:rgb(227, 108, 9);'>CSDN\u4e91\u8ba1\u7b97\u9891\u9053<\/span>\u65b0\u5efa\u680f\u76ee\uff0c\u4ee5\u5b9e\u8df5\u4e3a\u672c\uff0c\u5206\u4eab\u4e2a\u4eba\u5bf9\u4e8e\u65b0\u65f6\u4ee3\u8f6f\u4ef6\u67b6\u6784\u4e0e\u7814\u53d1\u7684\u6df1\u523b\u89c1\u89e3\u3002\u5728\u542b\u6709\u201c\u3010\u95ee\u5e95\u3011\u201d\u5b57\u6837\u6807\u9898\u7684\u6587\u7ae0\u4e2d\uff0c\u4f60\u4f1a\u770b\u5230\u67d0\u4e2a\u56fd\u5916IT\u5de8\u5934\u7684\u67b6\u6784\u5206\u4eab\uff0c\u4f1a\u770b\u5230\u56fd\u5185\u8d44\u6df1\u5de5\u7a0b\u5e08\u5bf9\u67d0\u4e2a\u6280\u672f\u7684\u5b9e\u8df5\u603b\u7ed3\uff0c\u66f4\u4f1a\u770b\u5230\u4e00\u7cfb\u5217\u5173\u4e8e\u67d0\u4e2a\u65b0\u6280\u672f\u7684\u63a2\u7d22\u3002<\/b> \r\n   <b><span style='color:rgb(227, 108, 9);'>\u300a\u95ee\u5e95\u300b\u9080\u8bf7\u5bf9\u6280\u672f\u5177\u6709\u72ec\u7279\/\u6df1\u523b\u89c1\u89e3\u7684\u4f60\u4e00\u8d77\u6253\u9020\u4e00\u7247\u53ea\u5c5e\u4e8e\u6280\u672f\u7684\u5929\u7a7a\uff0c\u8be6\u60c5\u53ef\u90ae\u4ef6\u81f3<a href='http:\/\/zhonghao@csdn.net\/' style='color:rgb(0, 102, 204);'>zhonghao@csdn.net<\/a>\u3002<\/span><\/b>&nbsp; \r\n  <\/div><\/h1> \r\n<\/div>\r\n ","excerpt":"\u00a0\u95ee\u5e95\u738b\u5e05PHP\u6458\u8981\uff1aPHP\u4f5c\u4e3a\u4e00\u95e8\u7b80\u5355\u800c\u5f3a\u5927\u7684\u8bed\u8a00\uff0c\u80fd\u591f\u63d0\u4f9b\u5f88\u591aWeb\u9002\u7528\u7684\u8bed\u8a00\u7279\u6027\u3002\u4ece\u5b9e\u8df5\u51fa\u53d1\uff0c\u7ee7\u5f31\u7c7b\u578b\u53d8\u91cf\u539f\u7406\u63a2\u7a76\u540e\uff0c\u738b\u5e05\u5c06\u7ee7\u7eed\u5e26\u5927\u5bb6\u5f04\u6e05PHP\u5185\u6838\u4e2d\u7684\u4e00\u4e9b\u5e38\u7528\u90e8\u5206\uff0c\u672c\u671f\u5219\u662fSAPI\u7684\u6df1\u5165\u7406\u89e3\u3002SAPI\u662fServerApplicationProgrammingInterface\uff08\u670d\u52a1\u5668\u5e94\u7528","author":"1","sortid":"19","type":"blog","views":"67","comnum":"0","tbcount":"0","attnum":"0","top":"n","hide":"n","allow_remark":"y","allow_tb":"y","password":"","thumb":"0","alias":""}