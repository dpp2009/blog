{"gid":"407","title":"coreseek\u7d22\u5f15\u66f4\u65b0\u673a\u5236","date":"1418770800","content":"\r\n <span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>coreseek\u7684\u7d22\u5f15\u66f4\u65b0\u673a\u5236\u4e0a\uff0c\u539f\u6765\u662f\u6bcf\u9694\u4e00\u5206\u949f\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\uff0c\u6bcf\u5929\u518d\u91cd\u5efa\u4e00\u6b21\u7d22\u5f15\u3002sph_counter \u4e2d\u5b58\u653e\u533a\u5206\u4e3b\u7d22\u5f15\u548c\u589e\u91cf\u7d22\u5f15\u7684maxid\u3002<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u73b0\u5728\u7684\u65b9\u6cd5\uff0c\u4f9d\u65e7\u662f\u6bcf\u5206\u949f\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\uff0c\u4f46\u662f\u91cd\u5efa\u7d22\u5f15\u6539\u6210\u5408\u5e76\uff0c\u5c06\u589e\u91cf\u7d22\u5f15\u5408\u5e76\u5230\u4e3b\u7d22\u5f15\u4e2d\uff0c\u5e76\u66f4\u6539sph_counter\u4e2d\u7684maxid\u503c\uff0c\u6e05\u7a7a\u589e\u91cf\u7d22\u5f15\u3002\u641c\u7d22\u5219\u90fd\u662f\u540c\u65f6\u4ece\u4e24\u4e2a\u7d22\u5f15\u4e2d\u641c\u7d22\u3002<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u66f4 \u65b0sph_counter\u7684maxid\u503c\uff0c\u8fd9\u4e2a\u65f6\u5019\u8fd8\u6ca1\u6709\u8003\u8651\u5230\u6e05\u7a7a\u589e\u91cf\u7d22\u5f15\uff0c\u6240\u4ee5\u5408\u5e76\u7d22\u5f15\u8fd9\u6b65\u6682\u65f6\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u800c\u5408\u5e76\u7d22\u5f15\u540e\uff0c\u518d\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\uff0c\u8fd8\u4f1a\u5f97 \u5230\u7b2c\u4e00\u6b21\u5efa\u7acb\u7d22\u5f15\u540e\u7684\u6240\u6709\u589e\u91cf\uff0c\u56e0\u4e3a\u6ca1\u6709\u6539\u53d8maxid\uff0c\u540e\u6765\u7528sql_query_post_index\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\u540e\u6539\u53d8maxid\u503c\uff0c\u4e8e\u662f\u5728\u589e\u91cf index\u4e2d\u52a0\u5165\u4e86\u8fd9\u4e2a\u9009\u9879\uff0c\u5f00\u59cb\u662f\u624b\u5de5\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\uff0c\u5408\u5e76\u5230\u4e3b\u7d22\u5f15\uff0c\u8fd9\u4e24\u6b65\u4e00\u8d77\u505a\uff0c\u6ca1\u6709\u95ee\u9898\uff0c\u540e\u6765\u7528crontab\u624d\u53d1\u73b0\uff0c\u589e\u91cf\u7d22\u5f15\u6bcf\u66f4\u65b0\u4e00\u6b21\uff0c\u524d\u9762\u7684 \u8bb0\u5f55\u90fd\u4f1a\u4e22\u5931\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u8bb0\u5f55\u8fd8\u6ca1\u6709\u5408\u5e76\u5230\u4e3b\u7d22\u5f15\u5c31\u88ab\u66f4\u65b0\u7684\u589e\u91cf\u7d22\u5f15\u8986\u76d6\u4e86\u3002\u8fd9\u4e2a\u65b9\u6cd5\u884c\u4e0d\u901a\uff0c\u540e\u6765\u7528\u811a\u672c\u66f4\u6539\u6570\u636e\u8868\u4e2d\u7684\u503c<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u5408\u5e76\u7d22\u5f15\u540e\uff0c\u6e05\u7a7a \u589e\u91cf\u7d22\u5f15\uff0c\u5230\u5e95\u600e\u4e48\u4e2a\u6e05\u7a7a\u6cd5\u662f\u4e2a\u95ee\u9898\uff0c\u5f00\u59cb\u7684\u60f3\u6cd5\u662f\u76f4\u63a5\u5220\u9664\u589e\u91cf\u7d22\u5f15\u6587\u4ef6\uff0c\u5220\u9664\u540e\u52a0--rotate\uff0c\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\u4f1a\u51fa\u9519\uff0c\u51fa\u9519\u4fe1\u606f\u597d\u50cf\u662f\u6ca1\u6709\u589e\u91cf\u7d22\u5f15\u7684 \u6587\u4ef6\u3002\u540e\u6765\u53bb\u6389--rotate\uff0c\u6ca1\u6709\u51fa\u9519\uff0c\u53ef\u662f\u540e\u9762\u7684\u6bcf\u5206\u949f\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\u4f1a\u6709\u95ee\u9898\uff0c\u770b\u4e86\u4e00\u4e0b\u7d22\u5f15\u6587\u4ef6\uff0c\u53ea\u8981\u52a0\u4e86--rotate\u7684\uff0c\u751f\u6210\u7684\u589e\u91cf\u7d22\u5f15\u6587\u4ef6 \u662fdelta_new.*\uff0c\u8fd9\u6837\uff0c\u867d\u7136\u589e\u91cf\u7d22\u5f15\u66f4\u65b0\u6210\u529f\uff0c\u5374\u641c\u7d22\u4e0d\u8981\u66f4\u65b0\u7684\u8bb0\u5f55\u3002\u5982\u679c\u4e0d\u52a0--rotate\uff0c\u7d22\u5f15\u6587\u4ef6\u6b63\u5e38\uff0c\u4f46\u662f\u4f9d\u65e7\u641c\u7d22\u4e0d\u5230\u65b0\u8bb0\u5f55\u3002\u540e\u6765 \u4e0d\u77e5\u600e\u7684\u4e00\u60f3\uff0c\u4e0d\u7528\u5220\u9664\u7d22\u5f15\u6587\u4ef6\uff0c\u56e0\u4e3a\u524d\u9762\u7684maxid\u503c\u5df2\u7ecf\u6539\u53d8\u4e86\uff0c\u76f4\u63a5\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\u4e5f\u53ef\u4ee5<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u4e0b\u9762\u6574\u4e2a\u7684\u8d34\u4e00\u4e0b\u4ee3\u7801\u3002<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>1\u3001\u9996\u5148\u662f\u5efa\u7acb\u7d22\u5f15<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\/usr\/local\/coreseek\/bin\/indexer --all --config \/data\/coreseek\/conf\/post.conf<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>2\u3001\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\/usr\/local\/coreseek\/bin\/searchd --config \/data\/coreseek\/conf\/post.conf<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>3\u3001+\u8bb0\u5f55<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>4\u3001\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\uff0c\u8fd9\u4e2a\u5199\u5728\u811a\u672c\u91cc\uff0c\u56e0\u4e3a\u9700\u8981\u6bcf\u5206\u949f\u66f4\u65b0\u3002<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u6587\u4ef6\u540d\uff1a\/data\/coreseek\/sh\/build_delta_index.sh<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u5185\u5bb9\uff1a\/usr\/local\/coreseek\/bin\/indexer post_delta --config \/data\/coreseek\/conf\/post.conf --rotate<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>5\u3001\u5408\u5e76\u7d22\u5f15\uff0c\u8fd9\u4e2a\u4e5f\u8981\u5199\u5728\u811a\u672c\u91cc\uff0c\u6bcf\u5929\u5408\u5e76\u4e00\u6b21<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u6587\u4ef6\u540d\uff1a\/data\/coreseek\/sh\/build_main_index.sh<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u5185\u5bb9\uff1a\/usr\/local\/coreseek\/bin\/indexer --merge post_main post_delta --rotate --config \/data\/coreseek\/conf\/post.conf&nbsp; \/\/\u5408\u5e76\u7d22\u5f15<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\/usr\/local\/mysql\/bin\/mysql -hhostname -uusername -ppassword -Ddbname -e 'REPLACE INTO sph_counter SELECT 1, MAX(PostId) FROM Post' \/\/\u66f4\u6539maxid<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\/usr\/local\/coreseek\/bin\/indexer post_delta --config \/data\/coreseek\/conf\/post.conf --rotate &gt;&gt;\/var\/log\/coreseek\/deltaindexlog \/\/\u91cd\u5efa\u589e\u91cf\u7d22\u5f15<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u518d\u8d34\u4e0bcrontab\u89c4\u5219<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>*\/1 * * * * \/bin\/sh \/data\/coreseek\/sh\/build_delta_index.sh<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>30 1 * * * \/bin\/sh \/data\/coreseek\/sh\/build_main_index.sh<\/span> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<br style='line-height:28px;color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;background-color:#FFFFFF;'> \r\n<span style='color:#4B4E51;font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;line-height:28px;background-color:#FFFFFF;'>\u8f6c\u81ea\uff1a http:\/\/www.bestlovesky.com\/read.php?53<\/span>\r\n ","excerpt":"\u00a0coreseek\u7684\u7d22\u5f15\u66f4\u65b0\u673a\u5236\u4e0a\uff0c\u539f\u6765\u662f\u6bcf\u9694\u4e00\u5206\u949f\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\uff0c\u6bcf\u5929\u518d\u91cd\u5efa\u4e00\u6b21\u7d22\u5f15\u3002sph_counter\u4e2d\u5b58\u653e\u533a\u5206\u4e3b\u7d22\u5f15\u548c\u589e\u91cf\u7d22\u5f15\u7684maxid\u3002\u73b0\u5728\u7684\u65b9\u6cd5\uff0c\u4f9d\u65e7\u662f\u6bcf\u5206\u949f\u66f4\u65b0\u589e\u91cf\u7d22\u5f15\uff0c\u4f46\u662f\u91cd\u5efa\u7d22\u5f15\u6539\u6210\u5408\u5e76\uff0c\u5c06\u589e\u91cf\u7d22\u5f15\u5408\u5e76\u5230\u4e3b\u7d22\u5f15\u4e2d\uff0c\u5e76\u66f4\u6539sph_counter\u4e2d\u7684maxid\u503c\uff0c\u6e05\u7a7a\u589e\u91cf\u7d22\u5f15\u3002\u641c\u7d22","author":"1","sortid":"19","type":"blog","views":"45","comnum":"0","tbcount":"0","attnum":"0","top":"n","hide":"n","allow_remark":"y","allow_tb":"y","password":"","thumb":"0","alias":""}