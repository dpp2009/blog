{"gid":"478","title":"Haversine\u516c\u5f0f","date":"1411336800","content":"\r\n <div> \r\n <h1 style='background-color: rgb(255, 255, 255); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal;'><a href='http:\/\/www.cnblogs.com\/qzsonline\/archive\/2012\/08\/30\/2663306.html' style='color:rgb(0, 0, 0);font-size:24px;'>Haversine\u516c\u5f0f<\/a><\/h1> \r\n <div style='background-color: rgb(255, 255, 255); font-family: Verdana, Arial, Helvetica, sans-serif;'> \r\n  <div style='background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;'> \r\n   <pre style='font-family: 'Courier New' !important;'><span style='color: rgb(0, 128, 128);'> 1<\/span> Number.prototype.toRadians = <span style='color: rgb(0, 0, 255);'>function<\/span>() {\r\n<span style='color: rgb(0, 128, 128);'> 2<\/span>     <span style='color: rgb(0, 0, 255);'>return<\/span> <span style='color: rgb(0, 0, 255);'>this<\/span> * Math.PI \/ 180;\r\n<span style='color: rgb(0, 128, 128);'> 3<\/span> }\r\n<span style='color: rgb(0, 128, 128);'> 4<\/span> \r\n<span style='color: rgb(0, 128, 128);'> 5<\/span> <span style='color: rgb(0, 0, 255);'>function<\/span> distance(latitude1, longitude1, latitude2, longitude2) {\r\n<span style='color: rgb(0, 128, 128);'> 6<\/span>     <span style='color: rgb(0, 128, 0);'>\/\/<\/span><span style='color: rgb(0, 128, 0);'>R\u662f\u5730\u7403\u7684\u534a\u5f84\uff0c\u4ee5KM\u4e3a\u5355\u4f4d<\/span>\r\n<span style='color: rgb(0, 128, 128);'> 7<\/span>     <span style='color: rgb(0, 0, 255);'>var<\/span> R = 6371;\r\n<span style='color: rgb(0, 128, 128);'> 8<\/span> \r\n<span style='color: rgb(0, 128, 128);'> 9<\/span>     <span style='color: rgb(0, 0, 255);'>var<\/span> deltaLatitude = (latitude2 - latitude1).toRadians();\r\n<span style='color: rgb(0, 128, 128);'>10<\/span>     <span style='color: rgb(0, 0, 255);'>var<\/span> deltaLongitude = (longitude2 - longitude1).toRadians();\r\n<span style='color: rgb(0, 128, 128);'>11<\/span>     latitude1 = latitude1.toRadians(), latitude2 = latitude2.toRadians();\r\n<span style='color: rgb(0, 128, 128);'>12<\/span> \r\n<span style='color: rgb(0, 128, 128);'>13<\/span>     <span style='color: rgb(0, 0, 255);'>var<\/span> a = Math.sin(deltaLatitude \/ 2) * Math.sin(deltaLatitude \/ 2) + Math.cos(latitude1) * Math.cos(latitude2) * Math.sin(deltaLongitude \/ 2) * Math.sin(deltaLongitude \/ 2);\r\n<span style='color: rgb(0, 128, 128);'>14<\/span>     <span style='color: rgb(0, 0, 255);'>var<\/span> c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n<span style='color: rgb(0, 128, 128);'>15<\/span>     <span style='color: rgb(0, 0, 255);'>var<\/span> d = R * c;\r\n<span style='color: rgb(0, 128, 128);'>16<\/span>     <span style='color: rgb(0, 0, 255);'>return<\/span> d;\r\n<span style='color: rgb(0, 128, 128);'>17<\/span> }<\/pre> \r\n  <\/div> \r\n  <p>&nbsp;<\/p> \r\n  <p>\u8fd9\u6bb5\u4ee3\u7801\u53ef\u4ee5\u8ba1\u7b97\u5730\u7403\u4e0a\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u8ddd\u79bb\u3002<\/p> \r\n <\/div> \r\n<\/div> \r\n<div> \r\n <br> \r\n<\/div> \r\n<div>\r\n  Number.prototype.toRadians = function() { \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; return this * Math.PI \/ 180; \r\n<\/div> \r\n<div>\r\n  } \r\n<\/div> \r\n<div> \r\n<\/div> \r\n<div>\r\n  function distance(latitude1, longitude1, latitude2, longitude2) { \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; \/\/R\u662f\u5730\u7403\u7684\u534a\u5f84\uff0c\u4ee5KM\u4e3a\u5355\u4f4d \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; var R = 6371; \r\n<\/div> \r\n<div> \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; var deltaLatitude = (latitude2 - latitude1).toRadians(); \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; var deltaLongitude = (longitude2 - longitude1).toRadians(); \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; latitude1 = latitude1.toRadians(), latitude2 = latitude2.toRadians(); \r\n<\/div> \r\n<div> \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; var a = Math.sin(deltaLatitude \/ 2) * Math.sin(deltaLatitude \/ 2) + Math.cos(latitude1) * Math.cos(latitude2) * Math.sin(deltaLongitude \/ 2) * Math.sin(deltaLongitude \/ 2); \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)); \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; var d = R * c; \r\n<\/div> \r\n<div>\r\n  &nbsp; &nbsp; return d; \r\n<\/div> \r\n<div>\r\n  } \r\n<\/div>\r\n ","excerpt":"\u00a0Haversine\u516c\u5f0f1Number.prototype.toRadians=function(){2returnthis*Math.PI\/180;3}45functiondistance(latitude1,longitude1,latit","author":"1","sortid":"19","type":"blog","views":"48","comnum":"0","tbcount":"0","attnum":"0","top":"n","hide":"n","allow_remark":"y","allow_tb":"y","password":"","thumb":"0","alias":""}