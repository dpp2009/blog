{"gid":"210","title":"sina\u5fae\u535a\u961f\u5217memcacheq\u670d\u52a1\u5b89\u88c5\u4e0e\u539f\u7406","date":"1428444000","content":"\r\n <div> \r\n <h3 style='background-color:rgb(246, 246, 246);color:rgb(76, 76, 76);font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;font-style:normal;text-align:left;'><p style='background-color: rgb(246, 246, 246); font-weight: normal;'>memcacheQ\u662f\u4e00\u4e2a\u5355\u7eaf\u7684\u5206\u5e03\u5f0f\u6d88\u606f\u961f\u5217\u670d\u52a1\u3002\u5b83\u7684\u5b89\u88c5\u4f9d\u8d56\u4e8eBerkeleyDB \u548c libevent\uff0c\u6240\u4ee5\u8981\u5148\u5b89\u88c5\u8fd9BerkeleyDB\u548clibevent\uff1a<\/p><\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;'>\u4e00\uff0cBerkeleyDB<\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'> \r\n  <ol style='background-color: rgb(246, 246, 246); font-weight: normal;'> \r\n   <li>\u4e0b\u8f7d\u8f6f\u4ef6\u5305\uff0chttp:\/\/download.oracle.com\/berkeley-db\/db-5.0.21.tar.gz<\/li> \r\n   <li>\u89e3\u538b\u7f29\u540e\uff0ccd build_unix<\/li> \r\n   <li>..\/dist\/configure<\/li> \r\n   <li>make<\/li> \r\n   <li>sudo make install<\/li> \r\n  <\/ol><\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;'>\u4e8c\uff0clibevent \uff08\u9700\u89811.4.x \u6216\u66f4\u9ad8\uff09<\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'> \r\n  <ol style='background-color: rgb(246, 246, 246); font-weight: normal;'> \r\n   <li>\u4e0b\u8f7d\u8f6f\u4ef6\u5305\uff1a<a href='http:\/\/monkey.org\/~provos\/libevent\/' style='color:rgb(12, 108, 189);'>http:\/\/monkey.org\/~provos\/libevent\/<\/a><\/li> \r\n   <li>\u89e3\u538b\u7f29\u540econfigure &amp; make &amp; make install<\/li> \r\n  <\/ol><\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;'>\u4e09\uff0cmemcacheQ<\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'> \r\n  <ol style='background-color: rgb(246, 246, 246); font-weight: normal;'> \r\n   <li>\u4e0b\u8f7d\u8f6f\u4ef6\u5305\uff1ahttp:\/\/code.google.com\/p\/memcacheq\/downloads\/list<\/li> \r\n   <li>\u89e3\u538b\u7f29\uff0ccd\u8fdb\u76ee\u5f55<\/li> \r\n   <li>.\/configure \u2013with-bdb=\/usr\/local\/BerkeleyDB.5.0 \u2013with-libevent=\/usr\/local\/lib \u2013enable-threads<\/li> \r\n   <li>make<\/li> \r\n   <li>sudo make install<\/li> \r\n  <\/ol><\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;'>\u56db\uff0c\u542f\u52a8memcacheQ<\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'> \r\n  <ol style='background-color: rgb(246, 246, 246); font-weight: normal;'> \r\n   <li>\u4f7f\u7528memcacheq -h \u7684\u547d\u4ee4\u6765\u67e5\u770b\u547d\u4ee4\u884c\u9009\u9879<\/li> \r\n   <li>\u542f\u52a8memcacheq\uff1amemcacheq -d -r -H \/data1\/memcacheq -N -R -v -L 1024 -B 1024 &gt; \/data1\/mq_error.log 2&gt;&amp;1<\/li> \r\n  <\/ol><\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;'>\u4e94\uff0c\u4f7f\u7528<\/h3> \r\n <h3 style='background-color: rgb(246, 246, 246); color: rgb(76, 76, 76); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;'><p style='background-color: rgb(246, 246, 246); font-weight: normal;'>\u4f7f\u7528\u4ee5\u4e0a\u547d\u4ee4\u542f\u52a8mq\u540e\uff0c\uff08\u6ce8\u610f\u4e0a\u9762\u7684-B\u53c2\u6570\u8868\u793amessag\u7684body\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc71024 bytes\uff09\uff0c\u4f7f\u7528mq\u65f6\u53ea\u9700\u8981\u7528\u5230\u4e24\u4e2a\u547d\u4ee4\uff1aset\u548cget\uff1a<\/p> \r\n  <blockquote style='background-color: rgb(246, 246, 246); font-weight: normal;'> \r\n   <pre>set &lt;queue name&gt; &lt;flags&gt; 0 &lt;message_len&gt;\\r\\n<br>&lt;put your message body here&gt;\\r\\n<br>STORED\\r\\n<\/pre> \r\n  <\/blockquote> \r\n  <blockquote style='background-color: rgb(246, 246, 246); font-weight: normal;'> \r\n   <pre>get &lt;queue name&gt;\\r\\n<br>VALUE &lt;queue name&gt; &lt;flags&gt; &lt;message_len&gt;\\r\\n<br>&lt;your message body will come here&gt;\\r\\n<br>END\\r\\n<\/pre> \r\n  <\/blockquote><p style='background-color: rgb(246, 246, 246); font-weight: normal;'>\u53ef\u4ee5\u770b\u5230\uff0c\u548c<a href='http:\/\/web2.0coder.com\/?p=199' target='_blank' style='color:rgb(12, 108, 189);'>memcache\u534f\u8bae<\/a>\u57fa\u672c\u4e00\u81f4\uff0c\u53ea\u662f\u628akey name\u6362\u6210queue name\uff0c\u800c\u4e14\u5728set\u7684\u547d\u4ee4\u4e2d\uff0c\u5ffd\u7565\u4e86expire_time\u7684\u53c2\u6570\u3002\u6bd5\u7adfmq\u7684\u6570\u636e\u5b58\u50a8\u662f\u5b58\u5728berkeleyDB\u4e2d\uff0c\u505a\u4e86\u6301\u4e45\u5316\u5b58\u50a8\uff0c\u6ca1\u6709\u5185\u5b58\u7684\u8fc7\u671f\u65f6\u95f4\u3002<\/p><p style='background-color: rgb(246, 246, 246); font-weight: normal;'>\u5f53\u4f7f\u7528set\u547d\u4ee4\u65f6\uff0c\u5c31\u5411\u6307\u5b9a\u7684\u6d88\u606f\u961f\u5217\u4e2d\u5199\u5165\u4e86\u4e00\u6761\u65b0\u6d88\u606f\uff0c\u4e5f\u5c31\u662f\u5411BerkeleyDB\u4e2d\u65b0insert\u4e86\u4e00\u6761\u6570\u636e\uff0c\u5f53\u4f7f\u7528get\u547d\u4ee4\u65f6\uff0c\u5c31\u4ece \u6307\u5b9a\u961f\u5217\u4e2d\u53d6\u51fa\u4e00\u6761\u65b0\u6d88\u606f\uff0c\u4e5f\u5c31\u662f\u5411BerkeleyDB\u4e2ddelete\u4e86\u4e00\u6761\u6570\u636e\u3002\u5f53\u4f7f\u7528stats\u67e5\u770b\u4e00\u4e2a\u6307\u5b9a\u961f\u5217\u65f6\uff0c\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u961f\u5217\u4e00\u5171\u63a5\u6536\u4e86\u591a \u5c11\u6d88\u606f\uff0c\u5176\u4e2d\u88ab\u53d6\u51fa\u4e86\u591a\u5c11\u6761\u3002<\/p><p style='background-color: rgb(246, 246, 246); font-weight: normal;'>\u793a\u4f8b\uff1a<\/p> \r\n  <blockquote style='background-color: rgb(246, 246, 246); font-weight: normal;'> \r\n   <div>\r\n     fengbo@onlinegame-10-121:~$ telnet 127.0.0.1 22202 \r\n   <\/div> \r\n   <div>\r\n     Trying 127.0.0.1\u2026 \r\n   <\/div> \r\n   <div>\r\n     Connected to 127.0.0.1. \r\n   <\/div> \r\n   <div>\r\n     Escape character is \u2018^]\u2019. \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 153, 102);'>set q4 0 0 5<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 153, 102);'>hello<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 153, 102);'>STORED<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 153, 102);'>set q4 0 0 5<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 153, 102);'>world<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 153, 102);'>STORED<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 102, 255);'>stats queue<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 102, 255);'>STAT q4 2\/0<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 102, 255);'>END<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(255, 102, 0);'>get q4<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(255, 102, 0);'>VALUE q4 0 5<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(255, 102, 0);'>hello<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(255, 102, 0);'>END<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 102, 255);'>stats queue<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 102, 255);'>STAT q4 2\/1<\/span> \r\n   <\/div> \r\n   <div> \r\n    <span style='color:rgb(51, 102, 255);'>END<\/span> \r\n   <\/div> \r\n  <\/blockquote><p style='background-color: rgb(246, 246, 246); font-weight: normal;'>\u4e0a\u9762\u6267\u884c\u4e86\u4e24\u6b21set\u7684\u547d\u4ee4\uff0c\u4f7f\u7528stats queue\u67e5\u770b\u65f6\uff0c\u53ef\u4ee5\u770b\u5230q4\u7684\u961f\u5217\u4e2d\u5171\u6709\u6d88\u606f2\u6761\uff0c\u5df2\u53d6\u51fa0\u6761\uff1b\u5f53\u4f7f\u7528get\u53d6\u51fa\u7b2c\u4e00\u6761\u540e\uff0c\u518d\u6b64\u4f7f\u7528stats queue\u67e5\u770b\uff0cq4\u4e2d\u6d88\u606f\u67092\u6761\uff0c\u5176\u4e2d\u5df2\u53d6\u51fa1\u6761\u3002<\/p><\/h3> \r\n<\/div>\r\n ","excerpt":"\u00a0memcacheQ\u662f\u4e00\u4e2a\u5355\u7eaf\u7684\u5206\u5e03\u5f0f\u6d88\u606f\u961f\u5217\u670d\u52a1\u3002\u5b83\u7684\u5b89\u88c5\u4f9d\u8d56\u4e8eBerkeleyDB\u548clibevent\uff0c\u6240\u4ee5\u8981\u5148\u5b89\u88c5\u8fd9BerkeleyDB\u548clibevent\uff1a\u4e00\uff0cBerkeleyDB\u4e0b\u8f7d\u8f6f\u4ef6\u5305\uff0chttp:\/\/download.oracle.com\/berkeley-db\/db-5.0.21.ta","author":"1","sortid":"19","type":"blog","views":"251","comnum":"0","tbcount":"0","attnum":"0","top":"n","hide":"n","allow_remark":"y","allow_tb":"y","password":"","thumb":"0","alias":""}