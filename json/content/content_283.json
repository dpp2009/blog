{"gid":"283","title":"\u3010\u95ee\u5e95\u3011\u738b\u5e05\uff1a\u6df1\u5165PHP\u5185\u6838\uff08\u4e00\uff09\u2014\u2014\u5f31\u7c7b\u578b\u53d8\u91cf\u539f\u7406\u63a2\u7a76","date":"1426028400","content":"\r\n <div> \r\n <h1 style='background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 28px; font-weight: normal;'>\u3010\u95ee\u5e95\u3011\u738b\u5e05\uff1a\u6df1\u5165PHP\u5185\u6838\uff08\u4e00\uff09\u2014\u2014\u5f31\u7c7b\u578b\u53d8\u91cf\u539f\u7406\u63a2\u7a76<\/h1> \r\n <h4 style='background-color: rgb(255, 255, 255); color: rgb(153, 153, 153); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 12px; font-weight: normal;'> \r\n  <div>\r\n    \u53d1\u8868\u4e8e2014-09-19 09:00|&nbsp;9960\u6b21\u9605\u8bfb| \u6765\u6e90CSDN|&nbsp; \r\n   <font style='color: rgb(204, 0, 0);'>36<\/font>&nbsp;\u6761\u8bc4\u8bba| \u4f5c\u8005\u738b\u5e05 \r\n  <\/div><\/h4> \r\n <div style='background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif;'> \r\n  <a href='http:\/\/www.csdn.net\/tag\/%E9%97%AE%E5%BA%95\/news' style='background-color:rgb(243, 243, 243);color:rgb(51, 51, 51);'>\u95ee\u5e95<\/a> \r\n  <a href='http:\/\/www.csdn.net\/tag\/php\/news' style='background-color:rgb(243, 243, 243);color:rgb(51, 51, 51);'>PHP<\/a> \r\n  <a href='http:\/\/www.csdn.net\/tag\/%E7%8E%8B%E5%B8%85\/news' style='background-color:rgb(243, 243, 243);color:rgb(51, 51, 51);'>\u738b\u5e05<\/a> \r\n <\/div> \r\n <div style='background-color: rgb(247, 247, 247); color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif;'> \r\n  <strong>\u6458\u8981\uff1a<\/strong>PHP\u4f5c\u4e3a\u4e00\u95e8\u7b80\u5355\u800c\u5f3a\u5927\u7684\u8bed\u8a00\uff0c\u80fd\u591f\u63d0\u4f9b\u5f88\u591aWeb\u9002\u7528\u7684\u8bed\u8a00\u7279\u6027\uff0c\u800c\u4ece\u672c\u671f\u300a\u95ee\u5e95\u300b\u5f00\u59cb\uff0c\u738b\u5e05\u5c06\u4ece\u5b9e\u8df5\u51fa\u53d1\uff0c\u5e26\u4f60\u5f04\u6e05PHP\u5185\u6838\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684\u90e8\u5206\uff0c\u6bd4\u5982\u8fd9\u91cc\u7684\u201c\u5f31\u7c7b\u578b\u53d8\u91cf\u539f\u7406\u201d\u3002 \r\n <\/div> \r\n <div style='background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif;'> \r\n  <p>PHP\u662f\u4e00\u95e8\u7b80\u5355\u800c\u5f3a\u5927\u7684\u8bed\u8a00\uff0c\u63d0\u4f9b\u4e86\u5f88\u591aWeb\u9002\u7528\u7684\u8bed\u8a00\u7279\u6027\uff0c\u5176\u4e2d\u5c31\u5305\u62ec\u4e86\u53d8\u91cf\u5f31\u7c7b\u578b\uff0c\u5728\u5f31\u7c7b\u578b\u673a\u5236\u4e0b\uff0c\u4f60\u80fd\u591f\u7ed9\u4e00\u4e2a\u53d8\u91cf\u8d4b\u4efb\u610f\u7c7b\u578b\u7684\u503c\u3002&nbsp;<br><br>PHP\u7684\u6267\u884c\u662f\u901a\u8fc7Zend Engine\uff08\u4e0b\u9762\u7b80\u79f0ZE\uff09\uff0cZE\u662f\u4f7f\u7528C\u7f16\u5199\uff0c\u5728\u5e95\u5c42\u5b9e\u73b0\u4e86\u4e00\u5957\u5f31\u7c7b\u578b\u673a\u5236\u3002ZE\u7684\u5185\u5b58\u7ba1\u7406\u4f7f\u7528\u5199\u65f6\u62f7\u8d1d\u3001\u5f15\u7528\u8ba1\u6570\u7b49\u4f18\u5316\u7b56\u7565\uff0c\u51cf\u5c11\u518d\u53d8\u91cf\u8d4b\u503c\u65f6\u5019\u7684\u5185\u5b58\u62f7\u8d1d\u3002<\/p> \r\n  <p>\u4e0b\u9762\u4e0d\u5149\u5e26\u4f60\u63a2\u7d22PHP\u5f31\u7c7b\u578b\u7684\u539f\u7406\uff0c\u4e5f\u4f1a\u5728\u5199PHP\u6269\u5c55\u89d2\u5ea6\uff0c\u4ecb\u7ecd\u5982\u4f55\u64cd\u4f5cPHP\u7684\u53d8\u91cf\u3002&nbsp;<br><\/p> \r\n  <h2><strong>1. PHP\u7684\u53d8\u91cf\u7c7b\u578b<\/strong><\/h2> \r\n  <p>PHP\u7684\u53d8\u91cf\u7c7b\u578b\u67098\u79cd\uff1a<\/p> \r\n  <ul> \r\n   <li>\u6807\u51c6\u7c7b\u578b\uff1a\u5e03\u5c14boolen\uff0c\u6574\u578binteger\uff0c\u6d6e\u70b9float\uff0c\u5b57\u7b26string<\/li> \r\n   <li>\u590d\u6742\u7c7b\u578b\uff1a\u6570\u7ec4array\uff0c\u5bf9\u8c61object<\/li> \r\n   <li>\u7279\u6b8a\u7c7b\u578b\uff1a\u8d44\u6e90resource &nbsp;<\/li> \r\n  <\/ul> \r\n  <p>PHP\u4e0d\u4f1a\u4e25\u683c\u68c0\u9a8c\u53d8\u91cf\u7c7b\u578b\uff0c\u53d8\u91cf\u53ef\u4ee5\u4e0d\u663e\u793a\u7684\u58f0\u660e\u5176\u7c7b\u578b\uff0c\u800c\u5728\u8fd0\u884c\u671f\u95f4\u76f4\u63a5\u8d4b\u503c\u3002\u4e5f\u53ef\u4ee5\u5c06\u53d8\u91cf\u81ea\u7531\u7684\u8f6c\u6362\u7c7b\u578b\u3002\u5982\u4e0b\u4f8b\uff0c\u6ca1\u6709\u5b9e\u73b0\u58f0\u660e\u7684\u60c5\u51b5\u4e0b\uff0c$i\u53ef\u4ee5\u8d4b\u4efb\u610f\u7c7b\u578b\u7684\u503c\u3002<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&lt;?&nbsp;php&nbsp;&nbsp;<span style='color: rgb(221, 0, 0);'>$i<\/span>&nbsp;=&nbsp;1;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/\/int&nbsp;$i&nbsp;=&nbsp;'show&nbsp;me&nbsp;the&nbsp;money';&nbsp;&nbsp;\/\/string&nbsp;$i&nbsp;=&nbsp;0.02;&nbsp;&nbsp;\/\/&nbsp;float&nbsp;$i&nbsp;=&nbsp;array(1,&nbsp;2,&nbsp;3);&nbsp;&nbsp;\/\/&nbsp;array&nbsp;$i&nbsp;=&nbsp;new&nbsp;Exception('test',&nbsp;123);&nbsp;\/\/&nbsp;object&nbsp;$i&nbsp;=&nbsp;fopen('\/tmp\/aaa.txt',&nbsp;'a')&nbsp;\/\/&nbsp;resource&nbsp;?&gt;&nbsp;<\/span>&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>\u5982\u679c\u4f60\u5bf9\u5f31\u7c7b\u578b\u539f\u7406\u7406\u89e3\u4e0d\u6df1\u523b\uff0c\u5728\u53d8\u91cf\u6bd4\u8f83\u65f6\u5019\uff0c\u4f1a\u51fa\u73b0\u201c\u8d85\u51fa\u9884\u671f\u201d\u7684\u60ca\u559c\u3002<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&lt;?&nbsp;PHP&nbsp;<span style='color: rgb(221, 0, 0);'>$str1<\/span>&nbsp;=&nbsp;null;&nbsp;&nbsp;<span style='color: rgb(221, 0, 0);'>$str2<\/span>&nbsp;=&nbsp;false;&nbsp;&nbsp;echo&nbsp;<span style='color: rgb(221, 0, 0);'>$str1<\/span>==<span style='color: rgb(221, 0, 0);'>$str2<\/span>&nbsp;?&nbsp;<span style='color: rgb(0, 0, 255);'>'\u76f8\u7b49'<\/span>&nbsp;:&nbsp;<span style='color: rgb(0, 0, 255);'>'\u4e0d\u76f8\u7b49'<\/span>;&nbsp;&nbsp;<span style='color: rgb(221, 0, 0);'>$str3<\/span>&nbsp;=&nbsp;<span style='color: rgb(0, 0, 255);'>''<\/span>;&nbsp;&nbsp;<span style='color: rgb(221, 0, 0);'>$str4<\/span>&nbsp;=&nbsp;0;&nbsp;&nbsp;echo&nbsp;<span style='color: rgb(221, 0, 0);'>$str3<\/span>==<span style='color: rgb(221, 0, 0);'>$str4<\/span>&nbsp;?&nbsp;<span style='color: rgb(0, 0, 255);'>'\u76f8\u7b49'<\/span>&nbsp;:&nbsp;<span style='color: rgb(0, 0, 255);'>'\u4e0d\u76f8\u7b49'<\/span>;&nbsp;&nbsp;<span style='color: rgb(221, 0, 0);'>$str5<\/span>&nbsp;=&nbsp;0;&nbsp;&nbsp;<span style='color: rgb(221, 0, 0);'>$str6<\/span>&nbsp;=&nbsp;<span style='color: rgb(0, 0, 255);'>'0'<\/span>;&nbsp;&nbsp;echo&nbsp;<span style='color: rgb(221, 0, 0);'>$str5<\/span>==<span style='color: rgb(221, 0, 0);'>$str6<\/span>&nbsp;?&nbsp;<span style='color: rgb(0, 0, 255);'>'\u76f8\u7b49'<\/span>&nbsp;:&nbsp;<span style='color: rgb(0, 0, 255);'>'\u4e0d\u76f8\u7b49'<\/span>;&nbsp;&nbsp;?&gt;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>\u4ee5\u4e0a\u4e09\u4e2a\u7ed3\u679c\u5168\u90e8\u662f\u76f8\u7b49\uff0c\u56e0\u4e3a\u5728\u53d8\u91cf\u6bd4\u8f83\u7684\u65f6\u5019\uff0cPHP\u5185\u90e8\u505a\u4e86\u53d8\u91cf\u8f6c\u6362\u3002\u5982\u679c\u5e0c\u671b\u503c\u548c\u7c7b\u578b\u540c\u65f6\u5224\u65ad\uff0c\u8bf7\u4f7f\u7528\u4e09\u4e2a=\uff08\u5982\uff0c$a===0\uff09\u6765\u5224\u65ad\u3002\u4e5f\u8bb8\u4f60\u4f1a\u89c9\u5f97\u53f8\u7a7a\u89c1\u60ef\uff0c\u4e5f\u8bb8\u4f60\u4f1a\u89c9\u5f97\u5f88\u795e\u5947\uff0c\u90a3\u4e48\u8bf7\u8ddf\u6211\u4e00\u8d77\u6df1\u5165PHP\u5185\u6838\uff0c\u63a2\u7d22PHP\u53d8\u91cf\u539f\u7406\u3002<\/p> \r\n  <h2><b>2. \u53d8\u91cf\u7684\u5b58\u50a8\u53ca\u6807\u51c6\u7c7b\u578b\u4ecb\u7ecd<\/b><\/h2> \r\n  <p>PHP\u7684\u6240\u6709\u53d8\u91cf\uff0c\u90fd\u662f\u4ee5\u7ed3\u6784\u4f53zval\u6765\u5b9e\u73b0\uff0c\u5728Zend\/zend.h\u4e2d\u6211\u4eec\u80fd\u770b\u5230zval\u7684\u5b9a\u4e49\uff1a<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>typedef&nbsp;union&nbsp;_zvalue_value&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;lval;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;long&nbsp;value&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;dval;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;double&nbsp;value&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*val;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;this&nbsp;will&nbsp;always&nbsp;be&nbsp;set&nbsp;for&nbsp;strings&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;str;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;string&nbsp;(always&nbsp;has&nbsp;length)&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashTable&nbsp;*ht;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;an&nbsp;array&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zend_object_value&nbsp;obj;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;stores&nbsp;an&nbsp;object&nbsp;store&nbsp;handle,&nbsp;and&nbsp;handlers&nbsp;*\/<\/span>&nbsp;&nbsp;}&nbsp;zvalue_value;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <div> \r\n   <table border='1' cellpadding='2' cellspacing='0' width='500' style='background-color:rgb(248, 248, 248);color:rgb(0, 0, 0);font-size:14px;'> \r\n    <thead> \r\n     <tr> \r\n      <td>\u5c5e\u6027\u540d<\/td> \r\n      <td>\u542b\u4e49<\/td> \r\n      <td>\u9ed8\u8ba4\u503c<\/td> \r\n     <\/tr> \r\n    <\/thead> \r\n    <tbody> \r\n     <tr> \r\n      <td>refcount__gc<\/td> \r\n      <td>\u8868\u793a\u5f15\u7528\u8ba1\u6570<\/td> \r\n      <td>1<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>is_ref__gc<\/td> \r\n      <td>\u8868\u793a\u662f\u5426\u4e3a\u5f15\u7528<\/td> \r\n      <td>0<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>value<\/td> \r\n      <td>\u5b58\u50a8\u53d8\u91cf\u7684\u503c<\/td> \r\n      <td> \r\n       <div> \r\n        <br> \r\n       <\/div><\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>type<\/td> \r\n      <td>\u53d8\u91cf\u5177\u4f53\u7684\u7c7b\u578b<\/td> \r\n      <td> \r\n       <div> \r\n        <br> \r\n       <\/div><\/td> \r\n     <\/tr> \r\n    <\/tbody> \r\n   <\/table> \r\n  <\/div> \r\n  <p>\u5176\u4e2drefcount__gc\u548cis_ref__gc\u8868\u793a\u53d8\u91cf\u662f\u5426\u662f\u4e00\u4e2a\u5f15\u7528\u3002type\u5b57\u6bb5\u6807\u8bc6\u53d8\u91cf\u7684\u7c7b\u578b\uff0ctype\u7684\u503c\u53ef\u4ee5\u662f\uff1aIS_NULL\uff0cIS_BOOL\uff0cIS_LONG\uff0cIS_FLOAT\uff0cIS_STRING\uff0cIS_ARRAY\uff0cIS_OBJECT\uff0cIS_RESOURCE\u3002PHP\u6839\u636etype\u7684\u7c7b\u578b\uff0c\u6765\u9009\u62e9\u5982\u4f55\u5b58\u50a8\u5230zvalue_value\u3002&nbsp;<br><br>zvalue_value\u80fd\u591f\u5b9e\u73b0\u53d8\u91cf\u5f31\u7c7b\u578b\u7684\u6838\u5fc3\uff0c\u5b9a\u4e49\u5982\u4e0b\uff1a<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>typedef&nbsp;union&nbsp;_zvalue_value&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;lval;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;long&nbsp;value&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;dval;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;double&nbsp;value&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*val;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;this&nbsp;will&nbsp;always&nbsp;be&nbsp;set&nbsp;for&nbsp;strings&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;str;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;string&nbsp;(always&nbsp;has&nbsp;length)&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashTable&nbsp;*ht;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;an&nbsp;array&nbsp;*\/<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zend_object_value&nbsp;obj;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/*&nbsp;stores&nbsp;an&nbsp;object&nbsp;store&nbsp;handle,&nbsp;and&nbsp;handlers&nbsp;*\/<\/span>&nbsp;&nbsp;}&nbsp;zvalue_value;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>\u5e03\u5c14\u578b\uff0czval.type=IS_BOOL\uff0c\u4f1a\u8bfb\u53d6zval.value.lval\u5b57\u6bb5\uff0c\u503c\u4e3a1\/0\u3002\u5982\u679c\u662f\u5b57\u7b26\u4e32\uff0czval.type=IS_STRING\uff0c\u4f1a\u8bfb\u53d6zval.value.str\uff0c\u8fd9\u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u5b58\u50a8\u4e86\u5b57\u7b26\u4e32\u6307\u9488\u548c\u957f\u5ea6\u3002<\/p> \r\n  <p>C\u8bed\u8a00\u4e2d\uff0c\u7528'\\0'\u4f5c\u4e3a\u5b57\u7b26\u4e32\u7ed3\u675f\u7b26\u3002\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u5b57\u7b26\u4e32'Hello\\0World'\u5728C\u8bed\u8a00\u4e2d\uff0c\u7528printf\u6765\u8f93\u51fa\u7684\u8bdd\uff0c\u53ea\u80fd\u8f93\u51fahello\uff0c\u56e0\u4e3a'\\0'\u4f1a\u8ba4\u4e3a\u5b57\u7b26\u5df2\u7ecf\u7ed3\u675f\u3002PHP\u4e2d\u662f\u901a\u8fc7\u7ed3\u6784\u4f53\u7684_zval_value.str.len\u6765\u63a7\u5236\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u76f8\u5173\u51fd\u6570\u4e0d\u4f1a\u9047\u5230'\\0'\u7ed3\u675f\u3002\u6240\u4ee5PHP\u7684\u5b57\u7b26\u4e32\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684\u3002<\/p> \r\n  <p>\u5982\u679c\u662fNULL\uff0c\u53ea\u9700\u8981zval.type=IS_NULL\uff0c\u4e0d\u9700\u8981\u8bfb\u53d6\u503c\u3002<\/p> \r\n  <p>\u901a\u8fc7\u5bf9zval\u7684\u5c01\u88c5\uff0cPHP\u5b9e\u73b0\u4e86\u5f31\u7c7b\u578b\uff0c\u5bf9\u4e8eZE\u6765\u8bf4\uff0c\u901a\u8fc7zval\u53ef\u4ee5\u5b58\u53d6\u4efb\u4f55\u7c7b\u578b\u3002<\/p> \r\n  <h2><b>3. \u9ad8\u7ea7\u7c7b\u578bArray\u548cObject\u6570\u7ec4Array<\/b><\/h2> \r\n  <p>\u6570\u7ec4\u662fPHP\u8bed\u8a00\u4e2d\u975e\u5e38\u5f3a\u5927\u7684\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u5206\u4e3a\u7d22\u5f15\u6570\u7ec4\u548c\u5173\u8054\u6570\u7ec4\uff0czval.type=IS_ARRAY\u3002\u5728\u5173\u8054\u6570\u7ec4\u4e2d\u6bcf\u4e2akey\u53ef\u4ee5\u5b58\u50a8\u4efb\u610f\u7c7b\u578b\u7684\u6570\u636e\u3002PHP\u7684\u6570\u7ec4\u662f\u7528Hash Table\u5b9e\u73b0\u7684\uff0c\u6570\u7ec4\u7684\u503c\u5b58\u5728zval.value.ht\u4e2d\u3002&nbsp;<\/p> \r\n  <p>\u540e\u9762\u4f1a\u4e13\u95e8\u8bb2\u5230PHP\u54c8\u5e0c\u8868\u7684\u5b9e\u73b0\u3002<\/p> \r\n  <p>\u5bf9\u8c61\u7c7b\u578b\u7684zval.type=IS_OBJECT\uff0c\u503c\u5b58\u5728zval.value.obj\u4e2d\u3002<\/p> \r\n  <h2><b>4. \u7279\u6b8a\u7c7b\u578b\u2014\u2014\u8d44\u6e90\u7c7b\u578b(Resource)\u4ecb\u7ecd<\/b><\/h2> \r\n  <p>\u8d44\u6e90\u7c7b\u578b\u662f\u4e2a\u5f88\u7279\u6b8a\u7684\u7c7b\u578b\uff0czval.type=IS_RESOURCE\uff0c\u5728PHP\u4e2d\u6709\u4e00\u4e9b\u5f88\u96be\u7528\u5e38\u89c4\u7c7b\u578b\u63cf\u8ff0\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6bd4\u5982\u6587\u4ef6\u53e5\u67c4\uff0c\u5bf9\u4e8eC\u8bed\u8a00\u6765\u8bf4\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u4e0d\u8fc7PHP\u4e2d\u6ca1\u6709\u6307\u9488\u7684\u6982\u5ff5\uff0c\u4e5f\u4e0d\u80fd\u7528\u5e38\u89c4\u7c7b\u578b\u6765\u7ea6\u675f\uff0c\u56e0\u6b64PHP\u901a\u8fc7\u8d44\u6e90\u7c7b\u578b\u6982\u5ff5\uff0c\u628aC\u8bed\u8a00\u4e2d\u7c7b\u4f3c\u6587\u4ef6\u6307\u9488\u7684\u53d8\u91cf\uff0c\u7528zval\u7ed3\u6784\u6765\u5c01\u88c5\u3002\u8d44\u6e90\u7c7b\u578b\u503c\u662f\u4e00\u4e2a\u6574\u6570\uff0cZE\u4f1a\u6839\u636e\u8fd9\u4e2a\u503c\u53bb\u8d44\u6e90\u7684\u54c8\u5e0c\u8868\u4e2d\u83b7\u53d6\u3002 &nbsp;<\/p> \r\n  <p>\u8d44\u6e90\u7c7b\u578b\u7684\u5b9a\u4e49\uff1a<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>typedefstruct_zend_rsrc_list_entry&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;*ptr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;type;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;refcount;&nbsp;&nbsp;}zend_rsrc_list_entry;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>\u5176\u4e2d\uff0cptr\u662f\u4e00\u4e2a\u6307\u5411\u8d44\u6e90\u7684\u6700\u7ec8\u5b9e\u73b0\u7684\u6307\u9488\uff0c\u4f8b\u5982\u4e00\u4e2a\u6587\u4ef6\u53e5\u67c4\uff0c\u6216\u8005\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u7ed3\u6784\u3002type\u662f\u4e00\u4e2a\u7c7b\u578b\u6807\u8bb0\uff0c\u7528\u4e8e\u533a\u5206\u4e0d\u540c\u7684\u8d44\u6e90\u7c7b\u578b\u3002refcount\u7528\u4e8e\u8d44\u6e90\u7684\u5f15\u7528\u8ba1\u6570\u3002<\/p> \r\n  <p>\u5185\u6838\u4e2d\uff0c\u8d44\u6e90\u7c7b\u578b\u662f\u901a\u8fc7\u51fd\u6570ZEND_FETCH_RESOURCE\u83b7\u53d6\u7684\u3002<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>ZEND_FETCH_RESOURCE(con,&nbsp;type,&nbsp;zval&nbsp;*,&nbsp;<span style='color: rgb(0, 102, 153); font-weight: 700;'>default<\/span>,&nbsp;resource_name,&nbsp;resource_type);&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <h2><b>5. \u53d8\u91cf\u7c7b\u578b\u7684\u8f6c\u6362<\/b><\/h2> \r\n  <p>\u6309\u7167\u73b0\u5728\u6211\u4eec\u5bf9PHP\u8bed\u8a00\u7684\u4e86\u89e3\uff0c\u53d8\u91cf\u7684\u7c7b\u578b\u4f9d\u8d56\u4e8ezval.type\u5b57\u6bb5\u6307\u793a\uff0c\u53d8\u91cf\u7684\u5185\u5bb9\u6309\u7167zval.type\u5b58\u50a8\u5230zval.value\u3002\u5f53PHP\u4e2d\u9700\u8981\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u4e24\u4e2a\u6b65\u9aa4\uff1a\u628azval.value\u7684\u503c\u6216\u6307\u9488\u6539\u53d8\uff0c\u518d\u6539\u53d8zval.type\u7684\u7c7b\u578b\u3002\u4e0d\u8fc7\u5bf9\u4e8ePHP\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53d8\u91cfArray\/Object\/Resource\uff0c\u53d8\u91cf\u8f6c\u6362\u8981\u8fdb\u884c\u66f4\u591a\u64cd\u4f5c\u3002<\/p> \r\n  <p>\u53d8\u91cf\u8f6c\u6362\u539f\u7406\u5206\u4e3a3\u79cd\uff1a<\/p> \r\n  <h3><b>5.1 \u6807\u51c6\u7c7b\u578b\u76f8\u4e92\u8f6c\u6362<\/b><\/h3> \r\n  <p>\u6bd4\u8f83\u7b80\u5355\uff0c\u6309\u7167\u4e0a\u8ff0\u7684\u6b65\u9aa4\u8f6c\u5316\u5373\u53ef\u3002<\/p> \r\n  <h3><b>5.2 \u6807\u51c6\u7c7b\u578b\u4e0e\u8d44\u6e90\u7c7b\u578b\u8f6c\u6362<\/b><\/h3> \r\n  <p>\u8d44\u6e90\u7c7b\u578b\u53ef\u4ee5\u7406\u89e3\u4e3a\u662fint\uff0c\u6bd4\u8f83\u65b9\u4fbf\u8f6c\u6362\u6807\u51c6\u7c7b\u578b\u3002\u8f6c\u6362\u540e\u8d44\u6e90\u4f1a\u88abclose\u6216\u56de\u6536\u3002<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&lt;?&nbsp;php&nbsp;<span style='color: rgb(221, 0, 0);'>$var<\/span>&nbsp;=&nbsp;fopen(<span style='color: rgb(0, 0, 255);'>'\/tmp\/aaa.txt'<\/span>,&nbsp;<span style='color: rgb(0, 0, 255);'>'a'<\/span>);\u3000<span style='color: rgb(0, 130, 0);'>\/\/&nbsp;\u8d44\u6e90&nbsp;#1&nbsp;$var&nbsp;=&nbsp;(int)&nbsp;$var;&nbsp;var_dump($var);&nbsp;&nbsp;\/\/&nbsp;\u8f93\u51fa1&nbsp;?&gt;<\/span>&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>5.3 \u6807\u51c6\u7c7b\u578b\u4e0e\u590d\u6742\u7c7b\u578b\u8f6c\u6362<\/p> \r\n  <p>Array\u8f6c\u6362\u6574\u578bint\/\u6d6e\u70b9\u578bfloat\u4f1a\u8fd4\u56de\u5143\u7d20\u4e2a\u6570\uff1b\u8f6c\u6362bool\u8fd4\u56deArray\u4e2d\u662f\u5426\u6709\u5143\u7d20\uff1b\u8f6c\u6362\u6210string\u8fd4\u56de'Array'\uff0c\u5e76\u629b\u51fawarning\u3002&nbsp;<br>\u8be6\u7ec6\u5185\u5bb9\u53d6\u51b3\u4e8e\u7ecf\u9a8c\uff0c\u8bf7\u9605\u8bfbPHP\u624b\u518c\uff1a&nbsp;<a href='http:\/\/php.net\/manual\/en\/language.types.type-juggling.php' target='_blank' style='color:rgb(0, 102, 204);'>http:\/\/php.net\/manual\/en\/language.types.type-juggling.php<\/a>&nbsp;<br><\/p> \r\n  <h3><b>5.4 \u590d\u6742\u7c7b\u578b\u76f8\u4e92\u8f6c\u6362<\/b><\/h3> \r\n  <p>array\u548cobject\u53ef\u4ee5\u4e92\u8f6c\u3002\u5982\u679c\u5176\u5b83\u4efb\u4f55\u7c7b\u578b\u7684\u503c\u88ab\u8f6c\u6362\u6210\u5bf9\u8c61\uff0c\u5c06\u4f1a\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7c7b<i>stdClass<\/i>\u7684\u5b9e\u4f8b\u3002<\/p> \r\n  <p>\u5728\u6211\u4eec\u5199PHP\u6269\u5c55\u7684\u65f6\u5019\uff0cPHP\u5185\u6838\u63d0\u4f9b\u4e86\u4e00\u7ec4\u51fd\u6570\u7528\u4e8e\u7c7b\u578b\u8f6c\u6362\uff1a &nbsp;<\/p> \r\n  <div> \r\n   <table border='1' cellpadding='2' cellspacing='0' width='500' style='background-color:rgb(248, 248, 248);color:rgb(0, 0, 0);font-size:14px;'> \r\n    <tbody> \r\n     <tr> \r\n      <td>void convert_to_long(zval* pzval)<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>void convert_to_double(zval* pzval)<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>void convert_to_long_base(zval* pzval, int base)<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>void convert_to_null(zval* pzval)<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>void convert_to_boolean(zval* pzval)<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>void convert_to_array(zval* pzval)<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>void convert_to_object(zval* pzval)<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>void convert_object_to_type(zval* pzval, convert_func_t converter)<\/td> \r\n     <\/tr> \r\n    <\/tbody> \r\n   <\/table> \r\n  <\/div> \r\n  <p>PHP\u5185\u6838\u63d0\u4f9b\u7684\u4e00\u7ec4\u5b8f\u6765\u65b9\u4fbf\u7684\u8bbf\u95eezval\uff0c\u7528\u4e8e\u66f4\u7ec6\u7c92\u5ea6\u7684\u83b7\u53d6zval\u7684\u503c\uff1a<\/p> \r\n  <div> \r\n   <table border='1' cellpadding='2' cellspacing='0' width='500' style='background-color:rgb(248, 248, 248);color:rgb(0, 0, 0);font-size:14px;'> \r\n    <tbody> \r\n     <tr> \r\n      <td colspan='2' style='text-align:center;'>\u5185\u6838\u8bbf\u95eezval\u5bb9\u5668\u7684API<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>\u5b8f<\/td> \r\n      <td>\u8bbf\u95ee\u53d8\u91cf<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_LVAL(zval)<\/i><\/td> \r\n      <td>(zval).value.lval<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_DVAL(zval)<\/i><\/td> \r\n      <td>(zval).value.dval<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_STRVAL(zval)<\/i><\/td> \r\n      <td>(zval).value.str.val<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_STRLEN(zval)<\/i><\/td> \r\n      <td>(zval).value.str.len<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_ARRVAL(zval)<\/i><\/td> \r\n      <td>(zval).&nbsp;<a href='http:\/\/value.ht\/' style='color:rgb(0, 102, 204);'>value.ht<\/a><\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_TYPE(zval)<\/i><\/td> \r\n      <td>(zval).type<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_LVAL_P(zval)<\/i><\/td> \r\n      <td>(*zval).value.lval<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_DVAL_P(zval)<\/i><\/td> \r\n      <td>(*zval).value.dval<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_STRVAL_P(zval_p)<\/i><\/td> \r\n      <td>(*zval).value.str.val<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_STRLEN_P(zval_p)<\/i><\/td> \r\n      <td>(*zval).value.str.len<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_ARRVAL_P(zval_p)<\/i><\/td> \r\n      <td>(*zval).&nbsp;<a href='http:\/\/value.ht\/' style='color:rgb(0, 102, 204);'>value.ht<\/a><\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_OBJ_HT_P(zval_p)<\/i><\/td> \r\n      <td>(*zval).value.obj.handlers<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_LVAL_PP(zval_pp)<\/i><\/td> \r\n      <td>(**zval).value.lval<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_DVAL_PP(zval_pp)<\/i><\/td> \r\n      <td>(**zval).value.dval<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_STRVAL_PP(zval_pp)<\/i><\/td> \r\n      <td>(**zval).value.str.val<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_STRLEN_PP(zval_pp)<\/i><\/td> \r\n      <td>(**zval).value.str.len<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>Z_ARRVAL_PP(zval_pp)<\/i><\/td> \r\n      <td>(**zval).&nbsp;<a href='http:\/\/value.ht\/' style='color:rgb(0, 102, 204);'>value.ht<\/a><\/td> \r\n     <\/tr> \r\n    <\/tbody> \r\n   <\/table> \r\n  <\/div> \r\n  <h2><b>6. \u53d8\u91cf\u7684\u7b26\u53f7\u8868\u4e0e\u4f5c\u7528\u57df<\/b><\/h2> \r\n  <p>PHP\u7684\u53d8\u91cf\u7b26\u53f7\u8868\u4e0ezval\u503c\u7684\u6620\u5c04\uff0c\u662f\u901a\u8fc7HashTable\uff08\u54c8\u5e0c\u8868\uff0c\u53c8\u53eb\u505a\u6563\u5217\u8868\uff0c\u4e0b\u9762\u7b80\u79f0HT\uff09\uff0cHashTable\u5728ZE\u4e2d\u5e7f\u6cdb\u4f7f\u7528\uff0c\u5305\u62ec\u5e38\u91cf\u3001\u53d8\u91cf\u3001\u51fd\u6570\u7b49\u8bed\u8a00\u7279\u6027\u90fd\u662fHT\u6765\u7ec4\u7ec7\uff0c\u5728PHP\u7684\u6570\u7ec4\u7c7b\u578b\u4e5f\u662f\u901a\u8fc7HashTable\u6765\u5b9e\u73b0\u3002&nbsp;<br>\u4e3e\u4e2a\u4f8b\u5b50\uff1a<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&lt;?&nbsp;php&nbsp;<span style='color: rgb(221, 0, 0);'>$var<\/span>&nbsp;=&nbsp;<span style='color: rgb(0, 0, 255);'>'Hello&nbsp;World'<\/span>;&nbsp;?&gt;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>$var\u7684\u53d8\u91cf\u540d\u4f1a\u5b58\u50a8\u5728\u53d8\u91cf\u7b26\u53f7\u8868\u4e2d\uff0c\u4ee3\u8868$var\u7684\u7c7b\u578b\u548c\u503c\u7684zval\u7ed3\u6784\u5b58\u50a8\u5728\u54c8\u5e0c\u8868\u4e2d\u3002\u5185\u6838\u901a\u8fc7\u53d8\u91cf\u7b26\u53f7\u8868\u4e0ezval\u5730\u5740\u7684\u54c8\u5e0c\u6620\u5c04\uff0c\u6765\u5b9e\u73b0PHP\u53d8\u91cf\u7684\u5b58\u53d6\u3002<\/p> \r\n  <p>\u4e3a\u4ec0\u4e48\u8981\u63d0\u4f5c\u7528\u57df\u5462\uff1f\u56e0\u4e3a\u51fd\u6570\u5185\u90e8\u53d8\u91cf\u4fdd\u62a4\u3002\u6309\u7167\u4f5c\u7528\u57dfPHP\u7684\u53d8\u91cf\u5206\u4e3a\u5168\u5c40\u53d8\u91cf\u548c\u5c40\u90e8\u53d8\u91cf\uff0c\u6bcf\u79cd\u4f5c\u7528\u57dfPHP\u90fd\u4f1a\u7ef4\u62a4\u4e00\u4e2a\u7b26\u53f7\u8868\u7684HashTable\u3002\u5f53\u5728PHP\u4e2d\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\u6216\u7c7b\u7684\u65f6\u5019\uff0cZE\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7b26\u53f7\u8868\uff0c\u8868\u660e\u51fd\u6570\u6216\u7c7b\u4e2d\u7684\u53d8\u91cf\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u8fd9\u6837\u5c31\u5b9e\u73b0\u4e86\u5c40\u90e8\u53d8\u91cf\u7684\u4fdd\u62a4--\u5916\u90e8\u65e0\u6cd5\u8bbf\u95ee\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf\u3002\u5f53\u521b\u5efa\u4e00\u4e2aPHP\u53d8\u91cf\u7684\u65f6\u5019\uff0cZE\u4f1a\u5206\u914d\u4e00\u4e2azval\uff0c\u5e76\u8bbe\u7f6e\u76f8\u5e94type\u548c\u521d\u59cb\u503c\uff0c\u628a\u8fd9\u4e2a\u53d8\u91cf\u52a0\u5165\u5f53\u524d\u4f5c\u7528\u57df\u7684\u7b26\u53f7\u8868\uff0c\u8fd9\u6837\u7528\u6237\u624d\u80fd\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u3002&nbsp;<br>\u5185\u6838\u4e2d\u4f7f\u7528ZEND_SET_SYMBOL\u6765\u8bbe\u7f6e\u53d8\u91cf\uff1a<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>ZEND_SET_SYMBOL(&nbsp;EG(active_symbol_table),&nbsp;<span style='color: rgb(0, 0, 255);'>'foo'<\/span>,&nbsp;foo);&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>\u67e5\u770b_zend_executor_globals\u7ed3\u6784<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>Zend\/zend_globals.h&nbsp;&nbsp;<\/span><\/li> \r\n    <li style='background-color: rgb(248, 248, 248);'><span style='color: rgb(0, 0, 0);'>&nbsp;struct&nbsp;_zend_executor_globals&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(0, 130, 0);'>\/\/\u7565&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashTable&nbsp;symbol_table;\/\/\u5168\u5c40\u53d8\u91cf\u7684\u7b26\u53f7\u8868&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashTable&nbsp;*active_symbol_table;\/\/\u5c40\u90e8\u53d8\u91cf\u7684\u7b26\u53f7\u8868&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/\/\u7565&nbsp;&nbsp;};&nbsp;<\/span>&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>\u5728\u5199PHP\u6269\u5c55\u65f6\u5019\uff0c\u53ef\u4ee5\u901a\u8fc7EG\u5b8f\u6765\u8bbf\u95eePHP\u7684\u53d8\u91cf\u7b26\u53f7\u8868\u3002EG(symbol_table)\u8bbf\u95ee\u5168\u5c40\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u7b26\u53f7\u8868\uff0cEG(active_symbol_table)\u8bbf\u95ee\u5f53\u524d\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u7b26\u53f7\u8868\uff0c\u5c40\u90e8\u53d8\u91cf\u5b58\u50a8\u7684\u662f\u6307\u9488\uff0c\u5728\u5bf9HashTable\u8fdb\u884c\u64cd\u4f5c\u7684\u65f6\u5019\u4f20\u9012\u7ed9\u76f8\u5e94\u51fd\u6570\u3002<\/p> \r\n  <p>\u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3\u53d8\u91cf\u7684\u54c8\u5e0c\u8868\u4e0e\u4f5c\u7528\u57df\uff0c\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>&lt;?&nbsp;php&nbsp;<span style='color: rgb(221, 0, 0);'>$temp<\/span>&nbsp;=&nbsp;<span style='color: rgb(0, 0, 255);'>'global'<\/span>;&nbsp;<span style='color: rgb(0, 102, 153); font-weight: 700;'>function<\/span>&nbsp;test()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: rgb(221, 0, 0);'>$temp<\/span>&nbsp;=&nbsp;<span style='color: rgb(0, 0, 255);'>'active'<\/span>;&nbsp;}&nbsp;test();&nbsp;var_dump(<span style='color: rgb(221, 0, 0);'>$temp<\/span>);&nbsp;?&gt;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>\u521b\u5efa\u51fd\u6570\u5916\u7684\u53d8\u91cf$temp\uff0c\u4f1a\u628a\u8fd9\u4e2a\u5b83\u52a0\u5165\u5168\u5c40\u7b26\u53f7\u8868\uff0c\u540c\u65f6\u5728\u5168\u5c40\u7b26\u53f7\u8868\u7684HashTable\u4e2d\uff0c\u5206\u914d\u4e00\u4e2a\u5b57\u7b26\u7c7b\u578b\u7684zval\uff0c\u503c\u4e3a\u2018global\u2018\u3002\u521b\u5efa\u51fd\u6570test\u5185\u90e8\u53d8\u91cf$temp\uff0c\u4f1a\u628a\u5b83\u52a0\u5165\u5c5e\u4e8e\u51fd\u6570test\u7684\u7b26\u53f7\u8868\uff0c\u5206\u914d\u5b57\u7b26\u578bzval\uff0c\u503c\u4e3a\u2019active' \u3002<\/p> \r\n  <h2><b>7. PHP\u6269\u5c55\u4e2d\u53d8\u91cf\u64cd\u4f5c<\/b><\/h2> \r\n  <h3><b>\u521b\u5efaPHP\u53d8\u91cf<\/b><\/h3> \r\n  <p>\u6211\u4eec\u53ef\u4ee5\u5728\u6269\u5c55\u4e2d\u8c03\u7528\u51fd\u6570MAKE_STD_ZVAL(pzv)\u6765\u521b\u5efa\u4e00\u4e2aPHP\u53ef\u8c03\u7528\u7684\u53d8\u91cf\uff0cMAKE_STD_ZVAL\u5e94\u7528\u5230\u7684\u5b8f\u6709\uff1a<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>#define&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MAKE_STD_ZVAL(zv)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ALLOC_ZVAL(zv);INIT_PZVAL(zv)&nbsp;&nbsp;&nbsp;#define&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ALLOC_ZVAL(z)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZEND_FAST_ALLOC(z,&nbsp;zval,&nbsp;ZVAL_CACHE_LIST)&nbsp;&nbsp;&nbsp;#define&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZEND_FAST_ALLOC(p,&nbsp;type,&nbsp;fc_type)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(p)&nbsp;=&nbsp;(type&nbsp;*)&nbsp;emalloc(sizeof(type))&nbsp;&nbsp;&nbsp;#define&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INIT_PZVAL(z)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(z)-&gt;refcount__gc&nbsp;=&nbsp;1;(z)-&gt;is_ref__gc&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>MAKE_STD_ZVAL(foo)\u5c55\u5f00\u540e\u5f97\u5230\uff1a<\/p> \r\n  <div style='background-color: rgb(231, 229, 220); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;'> \r\n   <div style='background-color: rgb(248, 248, 248); color: silver; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 9px;'> \r\n    <b>[php]<\/b>&nbsp; \r\n    <a title='view plain' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>view plain<\/a> \r\n    <a title='copy' href='http:\/\/www.csdn.net\/article\/2014-09-19\/2821685-exploring-of-the-php#' style='color: rgb(160, 160, 160);'>copy<\/a> \r\n   <\/div> \r\n   <ol start='1' style='background-color:rgb(255, 255, 255);color:rgb(92, 92, 92);'> \r\n    <li style='background-color:rgb(255, 255, 255);color:inherit;'><span style='color: rgb(0, 0, 0);'>(foo)&nbsp;=&nbsp;(zval&nbsp;*)&nbsp;emalloc(sizeof(zval));&nbsp;&nbsp;&nbsp;(foo)-&gt;refcount__gc&nbsp;=&nbsp;1;&nbsp;&nbsp;&nbsp;(foo)-&gt;is_ref__gc&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;<\/span><\/li> \r\n   <\/ol> \r\n  <\/div> \r\n  <p>\u53ef\u4ee5\u770b\u51fa\uff0cMAKE_STD_ZVAL\u505a\u4e86\u4e09\u4ef6\u4e8b\uff1a\u5206\u914d\u5185\u5b58\u3001\u521d\u59cb\u5316zval\u7ed3\u6784\u4e2d\u7684refcount\u3001is_ref\u3002&nbsp;<\/p> \r\n  <p>\u5185\u6838\u4e2d\u63d0\u4f9b\u4e00\u4e9b\u5b8f\u6765\u7b80\u5316\u6211\u4eec\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u53ea\u7528\u4e00\u6b65\u4fbf\u8bbe\u7f6e\u597dzval\u7684\u7c7b\u578b\u548c\u503c\u3002<\/p> \r\n  <div> \r\n   <table border='1' cellpadding='2' cellspacing='0' width='500' style='background-color:rgb(248, 248, 248);color:rgb(0, 0, 0);font-size:14px;'> \r\n    <tbody> \r\n     <tr> \r\n      <td colspan='2' style='text-align:center;'>API Macros for Accessing&nbsp;zval&nbsp;<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td>\u5b8f<\/td> \r\n      <td>\u5b9e\u73b0\u65b9\u6cd5<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_NULL(pvz)<\/i><\/td> \r\n      <td>Z_TYPE_P(pzv) = IS_NULL<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_BOOL(pvz)<\/i><\/td> \r\n      <td>Z_TYPE_P(pzv) = IS_BOOL;&nbsp;<br>Z_BVAL_P(pzv) = b ? 1 : 0;<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_TRUE(pvz)<\/i><\/td> \r\n      <td>ZVAL_BOOL(pzv, 1);<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_FALSE(pvz)<\/i><\/td> \r\n      <td>ZVAL_BOOL(pzv, 0);<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_LONG(pvz, l)(l \u662f\u503c)<\/i><\/td> \r\n      <td>Z_TYPE_P(pzv) = IS_LONG;Z_LVAL_P(pzv) = l;<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_DOUBLE(pvz, d)<\/i><\/td> \r\n      <td>Z_TYPE_P(pzv) = IS_DOUBLE;Z_LVAL_P(pzv) = d;<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_STRINGL(pvz, str, len, dup)<\/i><\/td> \r\n      <td>Z_TYPE_P(pzv) = IS_STRING;Z_STRLEN_P(pzv) = len;&nbsp;<br>if (dup) {&nbsp;<br>&nbsp; &nbsp; {Z_STRVAL_P(pzv) =estrndup(str, len + 1);}&nbsp;&nbsp;<br>}else {&nbsp;<br>&nbsp; &nbsp; {Z_STRVAL_P(pzv) = str;}&nbsp;<br>}<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_STRING(pvz, str, len)<\/i><\/td> \r\n      <td>ZVAL_STRINGL(pzv, str,strlen(str), dup);<\/td> \r\n     <\/tr> \r\n     <tr> \r\n      <td><i>ZVAL_RESOURCE(pvz, res)<\/i><\/td> \r\n      <td>Z_TYPE_P(pzv) = IS_RESOURCE;Z_RESVAL_P(pzv) = res;&nbsp;<\/td> \r\n     <\/tr> \r\n    <\/tbody> \r\n   <\/table> \r\n  <\/div> \r\n  <p><br><b>ZVAL_STRINGL(pzv,str,len,dup)\u4e2d\u7684dup\u53c2\u6570<\/b><\/p> \r\n  <p>\u5148\u9610\u8ff0\u4e00\u4e0bZVAL_STRINGL(pzv,str,len,dup); str\u548clen\u4e24\u4e2a\u53c2\u6570\u5f88\u597d\u7406\u89e3\uff0c\u56e0\u4e3a\u6211\u4eec\u77e5\u9053\u5185\u6838\u4e2d\u4fdd\u5b58\u4e86\u5b57\u7b26\u4e32\u7684\u5730\u5740\u548c\u5b83\u7684\u957f\u5ea6\uff0c\u540e\u9762\u7684dup\u7684\u610f\u601d\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u5b83\u6307\u660e\u4e86\u8be5\u5b57\u7b26\u4e32\u662f\u5426\u9700\u8981\u88ab\u590d\u5236\u3002\u503c\u4e3a 1 \u5c06\u5148\u7533\u8bf7\u4e00\u5757\u65b0\u5185\u5b58\u5e76\u8d4b\u503c\u8be5\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u628a\u65b0\u5185\u5b58\u7684\u5730\u5740\u590d\u5236\u7ed9pzv\uff0c\u4e3a 0 \u65f6\u5219\u662f\u76f4\u63a5\u628astr\u7684\u5730\u5740\u8d4b\u503c\u7ed9zval\u3002<\/p> \r\n  <p><b>ZVAL_STRINGL\u4e0eZVAL_STRING\u7684\u533a\u522b<\/b><\/p> \r\n  <p>\u5982\u679c\u4f60\u60f3\u5728\u67d0\u4e00\u4f4d\u7f6e\u622a\u53d6\u8be5\u5b57\u7b26\u4e32\u6216\u5df2\u7ecf\u77e5\u9053\u4e86\u8fd9\u4e2a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u5b8f ZVAL_STRINGL(zval, string, length, duplicate) \uff0c\u5b83\u663e\u5f0f\u7684\u6307\u5b9a\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u800c\u4e0d\u662f\u4f7f\u7528strlen()\u3002\u8fd9\u4e2a\u5b8f\u8be5\u5b57\u7b26\u4e32\u957f\u5ea6\u4f5c\u4e3a\u53c2\u6570\u3002\u4f46\u5b83\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684\uff0c\u800c\u4e14\u901f\u5ea6\u4e5f\u6bd4ZVAL_STRING\u5feb\uff0c\u56e0\u4e3a\u5c11\u4e86\u4e2astrlen\u3002&nbsp;<br><br><b>ZVAL_RESOURCE\u7ea6\u7b49\u4e8eZVAL_LONG<\/b><\/p> \r\n  <p>\u5728\u7ae0\u82824\u4e2d\u6211\u4eec\u8bf4\u8fc7\uff0cPHP\u4e2d\u7684\u8d44\u6e90\u7c7b\u578b\u7684\u503c\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u6240\u4ee5ZVAL_RESOURCE\u548cZVAL_LONG\u7684\u5de5\u4f5c\u5dee\u4e0d\u591a\uff0c\u53ea\u4e0d\u8fc7\u5b83\u4f1a\u628azval\u7684\u7c7b\u578b\u8bbe\u7f6e\u4e3a IS_RESOURCE\u3002<\/p> \r\n  <h2><b>8. \u603b\u7ed3<\/b><\/h2> \r\n  <p>PHP\u7684\u5f31\u7c7b\u578b\u662f\u901a\u8fc7ZE\u7684zval\u5bb9\u5668\u8f6c\u6362\u5b8c\u6210\uff0c\u901a\u8fc7\u54c8\u5e0c\u8868\u6765\u5b58\u50a8\u53d8\u91cf\u540d\u548czval\u6570\u636e\uff0c\u5728\u8fd0\u884c\u6548\u7387\u65b9\u9762\u6709\u4e00\u5b9a\u727a\u7272\u3002\u53e6\u5916\u56e0\u4e3a\u53d8\u91cf\u7c7b\u578b\u7684\u9690\u6027\u8f6c\u6362\uff0c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5bf9\u53d8\u91cf\u7c7b\u578b\u68c0\u6d4b\u529b\u5ea6\u4e0d\u591f\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u95ee\u9898\u51fa\u73b0\u3002&nbsp;<\/p> \r\n  <p>\u4e0d\u8fc7PHP\u7684\u5f31\u7c7b\u578b\u3001\u6570\u7ec4\u3001\u5185\u5b58\u6258\u7ba1\u3001\u6269\u5c55\u7b49\u8bed\u8a00\u7279\u6027\uff0c\u975e\u5e38\u9002\u5408Web\u5f00\u53d1\u573a\u666f\uff0c\u5f00\u53d1\u6548\u7387\u5f88\u9ad8\uff0c\u80fd\u591f\u52a0\u5feb\u4ea7\u54c1\u8fed\u4ee3\u5468\u671f\u3002\u5728\u6d77\u91cf\u670d\u52a1\u4e2d\uff0c\u901a\u5e38\u74f6\u9888\u5b58\u5728\u4e8e\u6570\u636e\u8bbf\u95ee\u5c42\uff0c\u800c\u4e0d\u662f\u8bed\u8a00\u672c\u8eab\u3002\u5728\u5b9e\u9645\u4f7f\u7528PHP\u4e0d\u4ec5\u62c5\u4efb\u903b\u8f91\u5c42\u548c\u5c55\u73b0\u5c42\u7684\u4efb\u52a1\uff0c\u6211\u4eec\u751a\u81f3\u7528PHP\u5f00\u53d1\u7684UDPServer\/TCPServer\u4f5c\u4e3a\u6570\u636e\u548ccache\u7684\u4e2d\u95f4\u5c42\u3002<\/p> \r\n  <p><b><span style='color:rgb(192, 145, 0);'>\u5173\u4e8e\u4f5c\u8005\uff1a\u738b\u5e05\uff0c\u817e\u8baf\u4f01\u4e1aQQ SaaS\u56e2\u961fLeader\u3002<\/span><\/b><\/p> \r\n  <p><b><span style='color:rgb(192, 145, 0);'>\u63a8\u8350\u9605\u8bfb\uff1a<a href='http:\/\/www.csdn.net\/article\/2014-08-20\/2821302-interview-tencent-b-qq-shuai-wang' style='color:rgb(0, 102, 204);'>\u4e13\u8bbf\u4f01\u4e1aQQ SaaS\u56e2\u961f\uff0c\u8c08\u4f01\u4e1a\u7ea7LNMP\u67b6\u6784\u8bbe\u8ba1<\/a><\/span><\/b><\/p> \r\n  <p><b>\u66f4\u591a\u300a\u95ee\u5e95\u300b\u5185\u5bb9<\/b><\/p> \r\n  <ul> \r\n   <li><a href='http:\/\/www.csdn.net\/article\/2014-09-11\/2821642-data-mining-by-Lanceyan' style='color:rgb(0, 102, 204);'>\u3010\u95ee\u5e95\u3011\u4e25\u6f9c\uff1a\u6570\u636e\u6316\u6398\u5165\u95e8\uff08\u4e00\uff09\u2014\u2014\u5206\u8bcd<\/a><\/li> \r\n   <li><a href='http:\/\/www.csdn.net\/article\/2014-09-10\/2821615-how-twitter-uses-redis-to-scale-105tb-ram-39mm-qps-10000-ins' style='color:rgb(0, 102, 204);'>\u3010\u95ee\u5e95\u3011Yao Yu\u8c08Twitter\u7684\u767eTB\u7ea7Redis\u7f13\u5b58\u5b9e\u8df5<\/a><\/li> \r\n   <li><a href='http:\/\/www.csdn.net\/article\/2014-09-15\/2821685-exploring-of-the-php' style='color:rgb(0, 102, 204);'>\u3010\u95ee\u5e95\u3011\u738b\u5e05\uff1a\u6df1\u5165PHP\u5185\u6838\uff08\u4e00\uff09\u2014\u2014\u5f31\u7c7b\u578b\u53d8\u91cf\u539f\u7406\u63a2\u7a76<\/a>&nbsp;<br><\/li> \r\n  <\/ul> \r\n  <p><b><span style='color:rgb(0, 128, 255);'>\u300a\u95ee\u5e95\u300b<\/span>\u662f<span style='color:rgb(192, 80, 77);'>CSDN\u4e91\u8ba1\u7b97\u9891\u9053<\/span>\u65b0\u5efa\u680f\u76ee\uff0c\u4ee5\u5b9e\u8df5\u4e3a\u672c\uff0c\u5206\u4eab\u4e2a\u4eba\u5bf9\u4e8e\u65b0\u65f6\u4ee3\u8f6f\u4ef6\u67b6\u6784\u4e0e\u7814\u53d1\u7684\u6df1\u523b\u89c1\u89e3\u3002\u5728\u542b\u6709\u201c\u3010\u95ee\u5e95\u3011\u201d\u5b57\u6837\u6807\u9898\u7684\u6587\u7ae0\u4e2d\uff0c\u4f60\u4f1a\u770b\u5230\u67d0\u4e2a\u56fd\u5916IT\u5de8\u5934\u7684\u67b6\u6784\u5206\u4eab\uff0c\u4f1a\u770b\u5230\u56fd\u5185\u8d44\u6df1\u5de5\u7a0b\u5e08\u5bf9\u67d0\u4e2a\u6280\u672f\u7684\u5b9e\u8df5\u603b\u7ed3\uff0c\u66f4\u4f1a\u770b\u5230\u4e00\u7cfb\u5217\u5173\u4e8e\u67d0\u4e2a\u65b0\u6280\u672f\u7684\u63a2\u7d22\u3002<\/b><b><span style='color:rgb(192, 80, 77);'>\u300a\u95ee\u5e95\u300b\u9080\u8bf7\u5bf9\u6280\u672f\u5177\u6709\u72ec\u7279\/\u6df1\u523b\u89c1\u89e3\u7684\u4f60\u4e00\u8d77\u6253\u9020\u4e00\u7247\u53ea\u5c5e\u4e8e\u6280\u672f\u7684\u5929\u7a7a\uff0c\u8be6\u60c5\u53ef\u90ae\u4ef6\u81f3<a href='http:\/\/zhonghao@csdn.net\/' target='_blank' style='color:rgb(0, 102, 204);'>zhonghao@csdn.net<\/a>\u3002<\/span><\/b><\/p> \r\n  <hr> \r\n  <p><b>\u514d\u8d39\u8ba2\u9605\u201c<span style='color:rgb(0, 128, 255);'>CSDN\u4e91\u8ba1\u7b97\uff08\u5de6\uff09<\/span>\u548c<span style='color:rgb(255, 0, 0);'>CSDN\u5927\u6570\u636e\uff08\u53f3\uff09<\/span>\u201d\u5fae\u4fe1\u516c\u4f17\u53f7\uff0c\u5b9e\u65f6\u638c\u63e1\u7b2c\u4e00\u624b\u4e91\u4e2d\u6d88\u606f\uff0c<b>\u4e86\u89e3\u6700\u65b0\u7684\u5927\u6570\u636e\u8fdb\u5c55\uff01<\/b><\/b><\/p> \r\n <\/div> \r\n<\/div>\r\n ","excerpt":"\u00a0\u3010\u95ee\u5e95\u3011\u738b\u5e05\uff1a\u6df1\u5165PHP\u5185\u6838\uff08\u4e00\uff09\u2014\u2014\u5f31\u7c7b\u578b\u53d8\u91cf\u539f\u7406\u63a2\u7a76\u53d1\u8868\u4e8e2014-09-1909:00","author":"1","sortid":"19","type":"blog","views":"52","comnum":"0","tbcount":"0","attnum":"0","top":"n","hide":"n","allow_remark":"y","allow_tb":"y","password":"","thumb":"0","alias":""}